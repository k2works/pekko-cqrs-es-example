# ä½œæ¥­å±¥æ­´ 2025-09-21

## æ¦‚è¦

2025-09-21ã®ä½œæ¥­å†…å®¹ã‚’ã¾ã¨ã‚ã¦ã„ã¾ã™ã€‚

ã“ã®æ—¥ã®ä½œæ¥­ã¯ã€Command APIã®è¨­å®šç®¡ç†ã®æ”¹å–„ã¨ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ä¿®æ­£ã«ç„¦ç‚¹ã‚’å½“ã¦ã¾ã—ãŸã€‚

## æŠ€è¡“çš„èƒŒæ™¯

### è¨­å®šç®¡ç†ã®éšå±¤åŒ–

#### èª²é¡Œ

å¾“æ¥ã®è¨­å®šæ§‹é€ ã§ã¯ã€ä»¥ä¸‹ã®å•é¡ŒãŒã‚ã‚Šã¾ã—ãŸï¼š

1. **è¨­å®šã®æ•£åœ¨**: `ServerConfig`ã¨`LoadBalancerConfig`ãŒåŒã˜éšå±¤ã«ã‚ã‚Šã€é–¢é€£æ€§ãŒä¸æ˜ç¢º
2. **é‡è¤‡ã—ãŸè¨­å®šèª­ã¿è¾¼ã¿**: è¤‡æ•°ã®å ´æ‰€ã§åŒã˜è¨­å®šãƒ‘ã‚¹ã‚’ç¹°ã‚Šè¿”ã—èª­ã¿è¾¼ã¿
3. **ä¿å®ˆæ€§ã®ä½ä¸‹**: è¨­å®šé …ç›®ã®è¿½åŠ æ™‚ã«è¤‡æ•°ç®‡æ‰€ã®ä¿®æ­£ãŒå¿…è¦

#### è§£æ±ºç­–: CommandApiConfigã®å°å…¥

æ–°ã—ã„éšå±¤æ§‹é€ ã‚’å°å…¥ï¼š

```
pcqrses.command-api
â”œâ”€â”€ actor-timeout          # ã‚¢ã‚¯ã‚¿ãƒ¼ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ
â”œâ”€â”€ server                 # ã‚µãƒ¼ãƒãƒ¼è¨­å®š
â”‚   â”œâ”€â”€ host
â”‚   â”œâ”€â”€ port
â”‚   â””â”€â”€ shutdown-timeout
â””â”€â”€ load-balancer         # ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µãƒ¼è¨­å®š
    â”œâ”€â”€ detach-wait-duration
    â””â”€â”€ health-check-grace-period
```

ã“ã‚Œã«ã‚ˆã‚Šï¼š

- **é–¢é€£è¨­å®šã®ã‚°ãƒ«ãƒ¼ãƒ—åŒ–**: è«–ç†çš„ã«é–¢é€£ã™ã‚‹è¨­å®šã‚’ä¸€ç®‡æ‰€ã«é›†ç´„
- **DRYåŸå‰‡ã®é©ç”¨**: è¨­å®šèª­ã¿è¾¼ã¿ãƒ­ã‚¸ãƒƒã‚¯ã‚’`CommandApiConfig`ã«é›†ç´„
- **å‹å®‰å…¨æ€§**: Scala 3ã®case classã«ã‚ˆã‚‹å‹å®‰å…¨ãªè¨­å®šã‚¢ã‚¯ã‚»ã‚¹
- **ãƒ†ã‚¹ã‚¿ãƒ“ãƒªãƒ†ã‚£**: ãƒ¢ãƒƒã‚¯ã‚„ãƒ†ã‚¹ãƒˆç”¨ã®è¨­å®šã‚’ç°¡å˜ã«ä½œæˆå¯èƒ½

### Scalaãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¨ãƒ“ãƒ«ãƒ‰ãƒ‘ã‚¹ã®å¯¾å¿œ

#### å•é¡Œ

Lambda JARãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹ãŒã€Scala 3.6.2ã®å®Ÿéš›ã®ãƒ“ãƒ«ãƒ‰å‡ºåŠ›ã¨ä¸€è‡´ã—ã¦ã„ã¾ã›ã‚“ã§ã—ãŸï¼š

```bash
# èª¤ã£ãŸãƒ‘ã‚¹
target/${SCALA_VERSION}/${PROJECT_NAME}-lambda.jar

# æ­£ã—ã„ãƒ‘ã‚¹
target/scala-${SCALA_VERSION}/${PROJECT_NAME}-lambda.jar
```

ã“ã‚Œã¯ã€SBTã®ãƒ“ãƒ«ãƒ‰å‡ºåŠ›ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã®ç†è§£ä¸è¶³ã«ã‚ˆã‚‹ã‚‚ã®ã§ã—ãŸã€‚

### ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆè¡¨ç¤ºã®æ”¹å–„

#### ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£ã®å‘ä¸Š

å¾“æ¥ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆè¡¨ç¤ºã§ã¯ã€å®Ÿéš›ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã¹ããƒ‘ã‚¹ãŒä¸æ˜ç¢ºã§ã—ãŸï¼š

```bash
# æ”¹å–„å‰
- Command API: http://localhost:8080
- Command Health Check: http://localhost:8080/health

# æ”¹å–„å¾Œ
- Command GraphQL API: http://localhost:8080/api/graphql
- Command Health Check: http://localhost:8080/api/health
- Command GraphQL Playground: http://localhost:8080/api/graphql (ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ã)
```

æ”¹å–„ç‚¹ï¼š

1. **å…·ä½“çš„ãªãƒ‘ã‚¹**: `/api/*`ãƒ‘ã‚¹ã‚’æ˜ç¤º
2. **ç”¨é€”ã®æ˜ç¢ºåŒ–**: GraphQL APIã¨Playgroundã‚’åŒºåˆ¥
3. **åˆ©ç”¨æ–¹æ³•ã®æç¤º**: Playgroundã¯ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ãæ—¨ã‚’æ˜è¨˜
4. **ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ã®ä¿®æ­£**: æœŸå¾…å€¤ã‚’`Healthy`ã‹ã‚‰`healthy`ã«ä¿®æ­£ï¼ˆå°æ–‡å­—ï¼‰

### ãƒ¢ãƒ¼ãƒ‰åˆ†é›¢ã®æ”¹å–„

`--db-onlyãƒ¢ãƒ¼ãƒ‰`æ™‚ã®Lambdaãƒ‡ãƒ—ãƒ­ã‚¤ã‚’ã‚¹ã‚­ãƒƒãƒ—ã™ã‚‹ã“ã¨ã§ï¼š

- **èµ·å‹•æ™‚é–“ã®çŸ­ç¸®**: ä¸è¦ãªå‡¦ç†ã‚’çœç•¥
- **ãƒªã‚½ãƒ¼ã‚¹ã®ç¯€ç´„**: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ã¿ãŒå¿…è¦ãªå ´åˆã®ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰å‰Šæ¸›
- **æ˜ç¢ºãªè²¬å‹™åˆ†é›¢**: å„ãƒ¢ãƒ¼ãƒ‰ã§ä½•ãŒå®Ÿè¡Œã•ã‚Œã‚‹ã‹ã‚’æ˜ç¢ºåŒ–

## ã‚³ãƒŸãƒƒãƒˆ: a7fd8f8

### ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸

```
refactor: Command APIã®è¨­å®šç®¡ç†ã‚’éšå±¤æ§‹é€ ã«å†ç·¨æˆ
- CommandApiConfigã‚¯ãƒ©ã‚¹ã‚’æ–°è¦è¿½åŠ ã—ã¦è¨­å®šã‚’çµ±åˆ
- ServerConfigã‚’CommandApiConfigé…ä¸‹ã«ç§»å‹•
- LoadBalancerConfigã‚’é©åˆ‡ãªãƒ‘ã‚¹æ§‹é€ ã«ä¿®æ­£
- MainActorã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£å‚ç…§ã‚’æ–°æ§‹é€ ã«åˆã‚ã›ã¦æ›´æ–°
- ActorSpecã®timeoutè¨­å®šã‚’ä¿®æ­£
```

### å¤‰æ›´ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«

- M	apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/MainActor.scala
- M	apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/config/CommandApiConfig.scala
- M	apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/config/LoadBalancerConfig.scala
- M	apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/config/ServerConfig.scala
- M	modules/command/interface-adapter/src/test/scala/io/github/j5ik2o/pcqrses/command/interfaceAdapter/test/ActorSpec.scala

### å¤‰æ›´å†…å®¹

```diff
commit a7fd8f83b981d3ad0afaa32cef2e79c25ddfbb6a
Author: Junichi Kato <j5ik2o@gmail.com>
Date:   Sun Sep 21 23:47:08 2025 +0900

    refactor: Command APIã®è¨­å®šç®¡ç†ã‚’éšå±¤æ§‹é€ ã«å†ç·¨æˆ
    
    - CommandApiConfigã‚¯ãƒ©ã‚¹ã‚’æ–°è¦è¿½åŠ ã—ã¦è¨­å®šã‚’çµ±åˆ
    - ServerConfigã‚’CommandApiConfigé…ä¸‹ã«ç§»å‹•
    - LoadBalancerConfigã‚’é©åˆ‡ãªãƒ‘ã‚¹æ§‹é€ ã«ä¿®æ­£
    - MainActorã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£å‚ç…§ã‚’æ–°æ§‹é€ ã«åˆã‚ã›ã¦æ›´æ–°
    - ActorSpecã®timeoutè¨­å®šã‚’ä¿®æ­£

diff --git a/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/MainActor.scala b/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/MainActor.scala
index 651ffbb..9ba0ff0 100644
--- a/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/MainActor.scala
+++ b/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/MainActor.scala
@@ -3,19 +3,19 @@ package io.github.j5ik2o.pcqrses.commandApi
 import io.github.j5ik2o.pcqrses.command.interfaceAdapter.aggregate.users.UserAccountAggregateRegistry
 import io.github.j5ik2o.pcqrses.command.interfaceAdapter.graphql.GraphQLService
 import io.github.j5ik2o.pcqrses.command.useCase.users.UserAccountUseCase
-import io.github.j5ik2o.pcqrses.commandApi.config.{LoadBalancerConfig, ServerConfig}
+import io.github.j5ik2o.pcqrses.commandApi.config.{CommandApiConfig, LoadBalancerConfig, ServerConfig}
 import io.github.j5ik2o.pcqrses.commandApi.routes.GraphQLRoutes
 import org.apache.pekko.actor.CoordinatedShutdown
 import org.apache.pekko.actor.typed.scaladsl.Behaviors
-import org.apache.pekko.actor.typed.{scaladsl, ActorSystem, Behavior, Scheduler}
+import org.apache.pekko.actor.typed.{ActorSystem, Behavior, Scheduler, scaladsl}
 import org.apache.pekko.cluster.typed.Cluster
 import org.apache.pekko.http.scaladsl.Http
-import org.apache.pekko.http.scaladsl.server.Directives._
+import org.apache.pekko.http.scaladsl.server.Directives.*
 import org.apache.pekko.management.cluster.bootstrap.ClusterBootstrap
 import org.apache.pekko.management.scaladsl.PekkoManagement
 import org.apache.pekko.stream.Materializer
 import org.apache.pekko.util.Timeout
-import org.apache.pekko.{pattern, Done}
+import org.apache.pekko.{Done, pattern}
 import zio.*
 
 import scala.concurrent.duration.*
@@ -36,21 +36,22 @@ object MainActor {
       implicit val scheduler: Scheduler = system.scheduler
       implicit val zioRuntime: Runtime[Any] = Runtime.default
 
-      val serverConfig = ServerConfig.from(system.settings.config.getConfig("pcqrses.command-api"))
+      val commandApiConfig = CommandApiConfig.from(system.settings.config.getConfig("pcqrses.command-api"))
+
       val isClusterEnabled = system.settings.config.hasPath("pekko.cluster.enabled") &&
         system.settings.config.getBoolean("pekko.cluster.enabled")
 
-      implicit val timeout: Timeout = Timeout(serverConfig.actorTimeout)
+      implicit val timeout: Timeout = Timeout(commandApiConfig.actorTimeout)
 
       context.log.info(
-        s"Command API server initializing... (timeout: ${serverConfig.actorTimeout}, host: ${serverConfig.host}:${serverConfig.port}, cluster: $isClusterEnabled)")
+        s"Command API server initializing... (timeout: ${commandApiConfig.actorTimeout}, host: ${commandApiConfig.server.host}:${commandApiConfig.server.port}, cluster: $isClusterEnabled)")
 
       if (isClusterEnabled) {
         initializeCluster(context)
       }
 
       // UserAccountUseCaseã¨GraphQLã‚µãƒ¼ãƒ“ã‚¹ã®åˆæœŸåŒ–
-      val userAccountUseCase = initializeCommandServices(context)
+      val userAccountUseCase = initializeUserAccountUseCase(commandApiConfig, context)
 
       // GraphQLã‚µãƒ¼ãƒ“ã‚¹ã®åˆæœŸåŒ–
       val graphQLService = GraphQLService(userAccountUseCase)
@@ -65,11 +66,11 @@ object MainActor {
       Behaviors.receiveMessage {
         case Start =>
           context.log.info(
-            s"Starting Command API server on ${serverConfig.host}:${serverConfig.port}")
+            s"Starting Command API server on ${commandApiConfig.server.host}:${commandApiConfig.server.port}")
 
           // HTTPã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•
           val serverBinding = Http()
-            .newServerAt(serverConfig.host, serverConfig.port)
+            .newServerAt(commandApiConfig.server.host, commandApiConfig.server.port)
             .bind(routes)
 
           context.pipeToSelf(serverBinding) {
@@ -101,13 +102,12 @@ object MainActor {
       }
     }
 
-  private def initializeCommandServices(context: scaladsl.ActorContext[Command])(implicit
-    system: ActorSystem[?],
-    executionContext: ExecutionContextExecutor,
-    zioRuntime: Runtime[Any]
+  private def initializeUserAccountUseCase(commandApiConfig: CommandApiConfig, context: scaladsl.ActorContext[Command])(implicit
+                                                                                    system: ActorSystem[?],
+                                                                                    executionContext: ExecutionContextExecutor,
+                                                                                    zioRuntime: Runtime[Any]
   ): UserAccountUseCase = {
-    val serverConfig = ServerConfig.from(system.settings.config.getConfig("pcqrses.command-api"))
-    implicit val timeout: Timeout = Timeout(serverConfig.actorTimeout)
+    implicit val timeout: Timeout = Timeout(commandApiConfig.actorTimeout)
     implicit val scheduler: Scheduler = system.scheduler
 
     val mode = UserAccountAggregateRegistry.modeFromConfig(system)
diff --git a/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/config/CommandApiConfig.scala b/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/config/CommandApiConfig.scala
index 1e3d85e..c371093 100644
--- a/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/config/CommandApiConfig.scala
+++ b/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/config/CommandApiConfig.scala
@@ -1,3 +1,18 @@
-package io.github.j5ik2o.pcqrses.commandApi.config class CommandApiConfig {
+package io.github.j5ik2o.pcqrses.commandApi.config
 
+import scala.jdk.DurationConverters.*
+
+final case class CommandApiConfig(
+  actorTimeout: scala.concurrent.duration.FiniteDuration,
+  server: ServerConfig,
+  loadBalancerConfig: LoadBalancerConfig
+                                 )
+
+object CommandApiConfig {
+  def from(config: com.typesafe.config.Config): CommandApiConfig =
+    CommandApiConfig(
+      actorTimeout = config.getDuration("actor-timeout").toScala,
+      server = ServerConfig.from(config.getConfig("server")),
+      loadBalancerConfig = LoadBalancerConfig.from(config.getConfig("load-balancer"))
+    )
 }
diff --git a/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/config/LoadBalancerConfig.scala b/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/config/LoadBalancerConfig.scala
index 70d173b..d6d57ad 100644
--- a/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/config/LoadBalancerConfig.scala
+++ b/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/config/LoadBalancerConfig.scala
@@ -12,7 +12,7 @@ final case class LoadBalancerConfig(
 object LoadBalancerConfig {
   def from(config: Config): LoadBalancerConfig =
     LoadBalancerConfig(
-      detachWaitDuration = config.getDuration("load-balancer.detach-wait-duration").toScala,
-      healthCheckGracePeriod = config.getDuration("load-balancer.health-check-grace-period").toScala
+      detachWaitDuration = config.getDuration("detach-wait-duration").toScala,
+      healthCheckGracePeriod = config.getDuration("health-check-grace-period").toScala
     )
 }
diff --git a/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/config/ServerConfig.scala b/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/config/ServerConfig.scala
index 5899311..0547b13 100644
--- a/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/config/ServerConfig.scala
+++ b/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/config/ServerConfig.scala
@@ -7,16 +7,14 @@ import scala.jdk.DurationConverters.*
 final case class ServerConfig(
   host: String,
   port: Int,
-  actorTimeout: scala.concurrent.duration.FiniteDuration,
   shutdownTimeout: scala.concurrent.duration.FiniteDuration
 )
 
 object ServerConfig {
   def from(config: Config): ServerConfig =
     ServerConfig(
-      host = config.getString("server.host"),
-      port = config.getInt("server.port"),
-      actorTimeout = config.getDuration("actor-timeout").toScala,
-      shutdownTimeout = config.getDuration("server.shutdown-timeout").toScala
+      host = config.getString("host"),
+      port = config.getInt("port"),
+      shutdownTimeout = config.getDuration("shutdown-timeout").toScala
     )
 }
diff --git a/modules/command/interface-adapter/src/test/scala/io/github/j5ik2o/pcqrses/command/interfaceAdapter/test/ActorSpec.scala b/modules/command/interface-adapter/src/test/scala/io/github/j5ik2o/pcqrses/command/interfaceAdapter/test/ActorSpec.scala
index cfd82d1..2da602a 100644
--- a/modules/command/interface-adapter/src/test/scala/io/github/j5ik2o/pcqrses/command/interfaceAdapter/test/ActorSpec.scala
+++ b/modules/command/interface-adapter/src/test/scala/io/github/j5ik2o/pcqrses/command/interfaceAdapter/test/ActorSpec.scala
@@ -37,18 +37,20 @@ abstract class ActorSpec(testKit: ActorTestKit)
 
   def this() = this(ActorTestKit(ActorTestKitBase.testNameFromCallStack()))
 
-  def this(config: String) =
+  def this(config: String) = {
     this(
       ActorTestKit(
         ActorTestKitBase.testNameFromCallStack(),
         ConfigFactory.parseString(config)
       )
     )
+  }
 
-  def this(config: Config) =
+  def this(config: Config) = {
     this(ActorTestKit(ActorTestKitBase.testNameFromCallStack(), config))
+  }
 
-  def this(config: Config, settings: TestKitSettings) =
+  def this(config: Config, settings: TestKitSettings) = {
     this(
       ActorTestKit(
         ActorTestKitBase.testNameFromCallStack(),
@@ -56,6 +58,7 @@ abstract class ActorSpec(testKit: ActorTestKit)
         settings
       )
     )
+  }
 
   implicit def classicSystem: ActorSystem = system.toClassic
 

```

## ã‚³ãƒŸãƒƒãƒˆ: 02c762b

### ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸

```
fix: ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ãƒã‚°ä¿®æ­£ã¨ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆè¡¨ç¤ºã®æ”¹å–„
- Lambda JARãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã‚’ä¿®æ­£ (target/scala-3.6.2å½¢å¼ã«å¯¾å¿œ)
- --db-onlyãƒ¢ãƒ¼ãƒ‰æ™‚ã®Lambdaãƒ‡ãƒ—ãƒ­ã‚¤ã‚’ã‚¹ã‚­ãƒƒãƒ—
- Command/Query APIã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆè¡¨ç¤ºã‚’/api/*ãƒ‘ã‚¹ã«ä¿®æ­£
- ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ã®ãƒ‘ã‚¹ã¨æœŸå¾…å€¤ã‚’ä¿®æ­£
```

### å¤‰æ›´ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«

- A	apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/config/CommandApiConfig.scala
- M	scripts/deploy-lambda-localstack.sh
- M	scripts/run-common.sh
- M	scripts/run-single.sh

### å¤‰æ›´å†…å®¹

```diff
commit 02c762b2e3f021f029906349ff8097c4072fa400
Author: Junichi Kato <j5ik2o@gmail.com>
Date:   Sun Sep 21 23:43:57 2025 +0900

    fix: ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ãƒã‚°ä¿®æ­£ã¨ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆè¡¨ç¤ºã®æ”¹å–„
    
    - Lambda JARãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã‚’ä¿®æ­£ (target/scala-3.6.2å½¢å¼ã«å¯¾å¿œ)
    - --db-onlyãƒ¢ãƒ¼ãƒ‰æ™‚ã®Lambdaãƒ‡ãƒ—ãƒ­ã‚¤ã‚’ã‚¹ã‚­ãƒƒãƒ—
    - Command/Query APIã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆè¡¨ç¤ºã‚’/api/*ãƒ‘ã‚¹ã«ä¿®æ­£
    - ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ã®ãƒ‘ã‚¹ã¨æœŸå¾…å€¤ã‚’ä¿®æ­£

diff --git a/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/config/CommandApiConfig.scala b/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/config/CommandApiConfig.scala
new file mode 100644
index 0000000..1e3d85e
--- /dev/null
+++ b/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/config/CommandApiConfig.scala
@@ -0,0 +1,3 @@
+package io.github.j5ik2o.pcqrses.commandApi.config class CommandApiConfig {
+
+}
diff --git a/scripts/deploy-lambda-localstack.sh b/scripts/deploy-lambda-localstack.sh
index c9f32e0..90eb471 100755
--- a/scripts/deploy-lambda-localstack.sh
+++ b/scripts/deploy-lambda-localstack.sh
@@ -54,7 +54,7 @@ export PAGER=cat
 sbt --batch "project readModelUpdater" assembly
 
 # Assembly JARã®ãƒ‘ã‚¹
-ASSEMBLY_JAR_PATH="apps/${PROJECT_NAME}/target/${SCALA_VERSION}/${PROJECT_NAME}-lambda.jar"
+ASSEMBLY_JAR_PATH="apps/${PROJECT_NAME}/target/scala-${SCALA_VERSION}/${PROJECT_NAME}-lambda.jar"
 
 # Assembly JARãŒå­˜åœ¨ã™ã‚‹ã“ã¨ã‚’ç¢ºèª
 if [ ! -f "$ASSEMBLY_JAR_PATH" ]; then
diff --git a/scripts/run-common.sh b/scripts/run-common.sh
index 1c2736d..99fef93 100755
--- a/scripts/run-common.sh
+++ b/scripts/run-common.sh
@@ -115,8 +115,8 @@ run_db_only_mode() {
         echo ""
         show_manual_start_instructions
 
-        # Lambdaè‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤
-        deploy_lambda_if_enabled
+        # Lambdaè‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆ--db-onlyãƒ¢ãƒ¼ãƒ‰ã§ã¯ã‚¹ã‚­ãƒƒãƒ—ï¼‰
+        # deploy_lambda_if_enabled
 
         echo ""
         echo "ğŸ›‘ To stop databases: $0 down"
@@ -230,7 +230,7 @@ show_db_only_access_points() {
 check_query_api() {
     echo ""
     echo "ğŸ“Š Checking Query API status..."
-    if ! wait_for_http "Query API" "http://localhost:${DOCKER_QUERY_API_PORT}/health" "Healthy" 120; then
+    if ! wait_for_http "Query API" "http://localhost:${DOCKER_QUERY_API_PORT}/api/health" "healthy" 120; then
         echo "âŒ Query API failed to start within 120 seconds"
         echo "ğŸ“œ Showing recent logs:"
         docker compose $1 logs --tail=50 query-api
@@ -252,9 +252,9 @@ check_dynamodb_admin() {
 # ========================================
 show_common_access_points() {
     echo "ğŸ“ Other services:"
-    echo "  - Query API: http://localhost:${DOCKER_QUERY_API_PORT}"
-    echo "  - Query Health Check: http://localhost:${DOCKER_QUERY_API_PORT}/health"
-    echo "  - GraphQL IDE (GraphiQL): http://localhost:${DOCKER_QUERY_API_PORT}/graphql"
+    echo "  - Query GraphQL API: http://localhost:${DOCKER_QUERY_API_PORT}/api/graphql"
+    echo "  - Query Health Check: http://localhost:${DOCKER_QUERY_API_PORT}/api/health"
+    echo "  - Query GraphQL Playground: http://localhost:${DOCKER_QUERY_API_PORT}/api/graphql (ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ã)"
     echo "  - DynamoDB Admin: http://localhost:${DOCKER_DYNAMODB_ADMIN_PORT}"
     echo "  - pgAdmin: http://localhost:${DOCKER_PGADMIN_PORT}"
     echo "  - PostgreSQL: localhost:${DOCKER_POSTGRES_PORT}"
diff --git a/scripts/run-single.sh b/scripts/run-single.sh
index 716d33c..78910e7 100755
--- a/scripts/run-single.sh
+++ b/scripts/run-single.sh
@@ -75,7 +75,7 @@ start_single_node_services() {
 
         # Command API ã®çŠ¶æ…‹ç¢ºèª
         echo "ğŸ“Š Checking services status..."
-        if ! wait_for_http "Command API" "http://localhost:${DOCKER_COMMAND_API_PORT}/health" "Healthy" 120; then
+        if ! wait_for_http "Command API" "http://localhost:${DOCKER_COMMAND_API_PORT}/api/health" "healthy" 120; then
             echo "âŒ Command API failed to start within 120 seconds"
             echo "ğŸ“œ Showing recent logs:"
             docker compose -f docker-compose-common.yml -f docker-compose-local.yml logs --tail=50 command-api
@@ -92,8 +92,9 @@ start_single_node_services() {
 
         # ã‚¢ã‚¯ã‚»ã‚¹ãƒã‚¤ãƒ³ãƒˆè¡¨ç¤º
         echo "ğŸ“ Access points:"
-        echo "  - Command API: http://localhost:${DOCKER_COMMAND_API_PORT}"
-        echo "  - Command Health Check: http://localhost:${DOCKER_COMMAND_API_PORT}/health"
+        echo "  - Command GraphQL API: http://localhost:${DOCKER_COMMAND_API_PORT}/api/graphql"
+        echo "  - Command Health Check: http://localhost:${DOCKER_COMMAND_API_PORT}/api/health"
+        echo "  - Command GraphQL Playground: http://localhost:${DOCKER_COMMAND_API_PORT}/api/graphql (ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ã)"
         show_common_access_points
     fi
 }

```

