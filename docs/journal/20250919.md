# 作業履歴 2025-09-19

## 概要

2025-09-19の作業内容をまとめています。

この日の作業は、Command APIサーバーの本格的な稼働に向けた基盤整備を行いました。設定管理の体系化、永続化バックエンドの選択、シリアライゼーション戦略の確立が主な内容です。

## 技術的背景

### 設定ファイル構造の分離と階層化

#### 課題：単一ファイルによる設定管理の限界

従来、全ての設定を単一の`application.conf`に記述していましたが、以下の問題が顕在化：

1. **責務の混在**: アプリケーション固有、フレームワーク、サードパーティライブラリの設定が混在
2. **可読性の低下**: ファイルが肥大化し、必要な設定を見つけることが困難
3. **再利用性の欠如**: 異なる環境で共通の設定を再利用できない
4. **変更の影響範囲**: 一部の変更が意図しない副作用を引き起こす可能性

#### 解決策：設定ファイルの分離

```
application.conf (エントリーポイント)
├── pcqrses.conf      # アプリケーション固有の設定
├── pekko.conf        # Pekko関連の設定
└── j5ik2o.conf       # DynamoDB永続化プラグインの設定
```

この構造により：

- **関心の分離**: 各設定ファイルが明確な責務を持つ
- **保守性の向上**: 特定の機能に関する設定を一箇所で管理
- **環境別の設定**: 環境変数による上書きを体系的に実装可能
- **テスタビリティ**: テスト用の設定を簡単に作成・管理

### DynamoDB Journalの採用

#### イベントソーシングの永続化戦略

イベントソーシングシステムでは、イベントの永続化バックエンドの選択が極めて重要です。DynamoDBを選択した理由：

1. **スケーラビリティ**: 水平スケーリングが容易で、負荷に応じた自動的な拡張
2. **可用性**: 複数のアベイラビリティゾーンでの自動レプリケーション
3. **パフォーマンス**: 一桁ミリ秒のレスポンスタイム
4. **運用負荷の削減**: マネージドサービスによる運用コストの最小化
5. **コスト効率**: 従量課金モデルによる柔軟なコスト管理

#### j5ik2o/pekko-persistence-dynamodbの利用

`j5ik2o.dynamo-db-journal`の設定により：

```hocon
j5ik2o.dynamo-db-journal {
  table-name = "Journal"
  get-journal-rows-index-name = "GetJournalRowsIndex"

  dynamo-db-client {
    access-key-id = ${?J5IK2O_DYNAMO_DB_JOURNAL_DYNAMO_DB_CLIENT_ACCESS_KEY_ID}
    secret-access-key = ${?J5IK2O_DYNAMO_DB_JOURNAL_DYNAMO_DB_CLIENT_SECRET_ACCESS_KEY}
    endpoint = ${?J5IK2O_DYNAMO_DB_JOURNAL_DYNAMO_DB_CLIENT_ENDPOINT}
  }
}
```

設計のポイント：

- **環境変数による設定**: セキュリティ上重要な情報はハードコードしない
- **デフォルト値の提供**: ローカル開発用のデフォルト値を設定
- **GSI（Global Secondary Index）**: 効率的なクエリのためのインデックス設計

### CborSerializableマーカートレイト

#### シリアライゼーション戦略の明示化

```scala
trait CborSerializable
```

このマーカートレイトの導入により：

1. **意図の明示**: どのクラスがシリアライズ対象かを型レベルで表現
2. **型安全性**: シリアライズ可能なオブジェクトのみを永続化
3. **パフォーマンス最適化**: CBORはJSONより高速でコンパクト
4. **Pekko Clusterとの統合**: クラスター間のメッセージ送信に必要

#### CBORの選択理由

Protocol Buffersではなく、CBORを選択した理由：

- **Scala型との親和性**: ケースクラスとの自然な統合
- **スキーマレス**: .protoファイルの管理が不要
- **実装の簡潔性**: pekko-serializationプラグインとの統合
- **デバッグの容易性**: 必要に応じてJSONにフォールバック可能

### Main.scalaの追加

アプリケーションのエントリーポイントを明確化：

```scala
object Main extends App {
  // ActorSystemの起動
  // 設定の読み込み
  // MainActorのspawn
}
```

これにより：

- **起動プロセスの標準化**: 一貫したアプリケーション起動手順
- **テスタビリティ**: エントリーポイントを分離することでテストが容易
- **エラーハンドリング**: 起動時のエラーを適切に処理
- **シャットダウンフック**: グレースフルシャットダウンの実装

## コミット: 47e6091

### メッセージ

```
feat: Command APIサーバーの基盤を整備
- MainActorの設定読み込みパスを修正
- 設定ファイル構造を整理（pcqrses.conf, pekko.conf, j5ik2o.conf）
- CborSerializableマーカートレイトを追加
- ServerConfigとLoadBalancerConfigの設定パスを更新
```

### 変更されたファイル

- A	apps/command-api/src/main/resources/application.conf
- A	apps/command-api/src/main/resources/j5ik2o.conf
- A	apps/command-api/src/main/resources/logback.xml
- A	apps/command-api/src/main/resources/pcqrses.conf
- A	apps/command-api/src/main/resources/pekko.conf
- A	apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/Main.scala
- M	apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/MainActor.scala
- M	apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/config/LoadBalancerConfig.scala
- M	apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/config/ServerConfig.scala
- A	modules/command/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/command/interfaceAdapter/aggregate/CborSerializable.scala

### 変更内容

```diff
commit 47e6091cfdf71a76bb7df328688aaeff0ae9cd8c
Author: Junichi Kato <j5ik2o@gmail.com>
Date:   Fri Sep 19 17:40:14 2025 +0900

    feat: Command APIサーバーの基盤を整備
    
    - MainActorの設定読み込みパスを修正
    - 設定ファイル構造を整理（pcqrses.conf, pekko.conf, j5ik2o.conf）
    - CborSerializableマーカートレイトを追加
    - ServerConfigとLoadBalancerConfigの設定パスを更新

diff --git a/apps/command-api/src/main/resources/application.conf b/apps/command-api/src/main/resources/application.conf
new file mode 100644
index 0000000..602eaae
--- /dev/null
+++ b/apps/command-api/src/main/resources/application.conf
@@ -0,0 +1,3 @@
+include "pcqrses.conf"
+include "pekko.conf"
+include "j5ik2o.conf"
diff --git a/apps/command-api/src/main/resources/j5ik2o.conf b/apps/command-api/src/main/resources/j5ik2o.conf
new file mode 100644
index 0000000..02e3b21
--- /dev/null
+++ b/apps/command-api/src/main/resources/j5ik2o.conf
@@ -0,0 +1,47 @@
+
+j5ik2o.dynamo-db-journal {
+  class = "com.github.j5ik2o.pekko.persistence.dynamodb.journal.DynamoDBJournal"
+  table-name = "Journal"
+  table-name = ${?J5IK2O_DYNAMO_DB_JOURNAL_TABLE_NAME}
+  get-journal-rows-index-name = "GetJournalRowsIndex"
+  get-journal-rows-index-name = ${?J5IK2O_DYNAMO_DB_JOURNAL_GET_JOURNAL_ROWS_INDEX_NAME}
+
+  dynamo-db-client {
+    access-key-id = "x"
+    access-key-id = ${?J5IK2O_DYNAMO_DB_JOURNAL_DYNAMO_DB_CLIENT_ACCESS_KEY_ID}
+    secret-access-key = "x"
+    secret-access-key = ${?J5IK2O_DYNAMO_DB_JOURNAL_DYNAMO_DB_CLIENT_SECRET_ACCESS_KEY}
+    endpoint = "http://localhost:8000/"
+    endpoint = ${?J5IK2O_DYNAMO_DB_JOURNAL_DYNAMO_DB_CLIENT_ENDPOINT}
+  }
+}
+
+j5ik2o.dynamo-db-snapshot {
+  class = "com.github.j5ik2o.pekko.persistence.dynamodb.snapshot.DynamoDBSnapshotStore"
+  table-name = "Snapshot"
+  table-name = ${?J5IK2O_DYNAMO_DB_SNAPSHOT_TABLE_NAME}
+
+  dynamo-db-client {
+    access-key-id = "DUMMY"
+    access-key-id = ${?J5IK2O_DYNAMO_DB_SNAPSHOT_DYNAMO_DB_CLIENT_ACCESS_KEY_ID}
+    secret-access-key = "DUMMY"
+    secret-access-key = ${?J5IK2O_DYNAMO_DB_SNAPSHOT_DYNAMO_DB_CLIENT_SECRET_ACCESS_KEY}
+    endpoint = "http://localhost:8000/"
+    endpoint = ${?J5IK2O_DYNAMO_DB_SNAPSHOT_DYNAMO_DB_CLIENT_ENDPOINT}
+  }
+}
+
+j5ik2o.dynamo-db-state {
+  class = "com.github.j5ik2o.pekko.persistence.dynamodb.state.DynamoDBDurableStateStoreProvider"
+  table-name = "State"
+  table-name = ${?J5IK2O_DYNAMO_DB_STATE_TABLE_NAME}
+
+  dynamo-db-client {
+    access-key-id = "x"
+    access-key-id = ${?J5IK2O_DYNAMO_DB_STATE_DYNAMO_DB_CLIENT_ACCESS_KEY_ID}
+    secret-access-key = "x"
+    secret-access-key = ${?J5IK2O_DYNAMO_DB_STATE_DYNAMO_DB_CLIENT_SECRET_ACCESS_KEY}
+    endpoint = "http://localhost:8000/"
+    endpoint = ${?J5IK2O_DYNAMO_DB_STATE_DYNAMO_DB_CLIENT_ENDPOINT}
+  }
+}
diff --git a/apps/command-api/src/main/resources/logback.xml b/apps/command-api/src/main/resources/logback.xml
new file mode 100644
index 0000000..6102280
--- /dev/null
+++ b/apps/command-api/src/main/resources/logback.xml
@@ -0,0 +1,11 @@
+<configuration>
+  <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
+    <encoder>
+      <pattern>%d{yyyy-MM-dd HH:mm:ss} %-5level %logger{36} - %msg%n</pattern>
+    </encoder>
+  </appender>
+
+  <root level="INFO">
+    <appender-ref ref="STDOUT" />
+  </root>
+</configuration>
diff --git a/apps/command-api/src/main/resources/pcqrses.conf b/apps/command-api/src/main/resources/pcqrses.conf
new file mode 100644
index 0000000..0c61659
--- /dev/null
+++ b/apps/command-api/src/main/resources/pcqrses.conf
@@ -0,0 +1,30 @@
+pcqrses {
+  command-api {
+    # アクター間通信のタイムアウト設定
+    actor-timeout = 5s
+    actor-timeout = ${?COMMAND_API_ACTOR_TIMEOUT}
+
+    # HTTPサーバーの設定
+    server {
+      host = "127.0.0.1"
+      host = ${?COMMAND_API_SERVER_HOST}
+      port = 18080
+      port = ${?COMMAND_API_SERVER_PORT}
+
+      # シャットダウン時のタイムアウト
+      shutdown-timeout = 10s
+      shutdown-timeout = ${?COMMAND_API_SHUTDOWN_TIMEOUT}
+    }
+
+    # LoadBalancer環境での設定
+    load-balancer {
+      # デタッチ待機時間（開発環境: 短時間、本番環境: 30秒程度）
+      detach-wait-duration = 3s
+      detach-wait-duration = ${?COMMAND_API_LOADBALANCER_DETACH_WAIT_DURATION}
+
+      # ヘルスチェックの猶予期間
+      health-check-grace-period = 5s
+      health-check-grace-period = ${?COMMAND_API_LOADBALANCER_HEALTH_GRACE_PERIOD}
+    }
+  }
+}
diff --git a/apps/command-api/src/main/resources/pekko.conf b/apps/command-api/src/main/resources/pekko.conf
new file mode 100644
index 0000000..08d2695
--- /dev/null
+++ b/apps/command-api/src/main/resources/pekko.conf
@@ -0,0 +1,54 @@
+pekko {
+  http {
+    server {
+      preview {
+        enable-http2 = on
+      }
+      http2 {
+        enabled = on
+      }
+    }
+  }
+  actor {
+    provider = local
+
+    cluster {
+      enabled = false
+      enabled = ${?PEKKO_CLUSTER_ENABLED}
+    }
+
+    warn-about-java-serializer-usage = on
+    allow-java-serialization = off
+
+  }
+
+  test {
+    single-expect-default = 5s
+    filter-leeway = 5s
+    timefactor = 1.0
+  }
+  coordinated-shutdown.run-by-actor-system-terminate = off
+}
+
+pekko.persistence.journal.plugin = "j5ik2o.dynamo-db-journal"
+pekko.persistence.snapshot-store.plugin = "j5ik2o.dynamo-db-snapshot"
+pekko.persistence.state.plugin = "j5ik2o.dynamo-db-state"
+
+//デバッグ用: InMemory
+//pekko {
+//  persistence {
+//    journal {
+//      plugin = "pekko.persistence.journal.inmem"
+//      inmem {
+//        class = "org.apache.pekko.persistence.journal.inmem.InmemJournal"
+//        plugin-dispatcher = "pekko.actor.default-dispatcher"
+//      }
+//    }
+//    snapshot-store {
+//      plugin = "pekko.persistence.snapshot-store.local"
+//      local {
+//        dir = "target/snapshot/$id"
+//      }
+//    }
+//  }
+//}
diff --git a/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/Main.scala b/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/Main.scala
new file mode 100644
index 0000000..e390015
--- /dev/null
+++ b/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/Main.scala
@@ -0,0 +1,12 @@
+package io.github.j5ik2o.pcqrses.commandApi
+
+import org.apache.pekko.actor.typed.ActorSystem
+
+import scala.concurrent.Await
+import scala.concurrent.duration.Duration
+
+object Main extends App {
+  private val system: ActorSystem[MainActor.Command] = ActorSystem(MainActor(), "command-api-system")
+  system ! MainActor.Start
+  Await.result(system.whenTerminated, Duration.Inf)
+}
diff --git a/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/MainActor.scala b/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/MainActor.scala
index 0c95c04..740ef3d 100644
--- a/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/MainActor.scala
+++ b/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/MainActor.scala
@@ -1,29 +1,54 @@
 package io.github.j5ik2o.pcqrses.commandApi
 
 import io.github.j5ik2o.pcqrses.commandApi.config.{LoadBalancerConfig, ServerConfig}
-import org.apache.pekko.{pattern, Done}
 import org.apache.pekko.actor.CoordinatedShutdown
 import org.apache.pekko.actor.typed.scaladsl.Behaviors
-import org.apache.pekko.actor.typed.{scaladsl, ActorSystem, Behavior, Scheduler}
+import org.apache.pekko.actor.typed.{ActorSystem, Behavior, Scheduler, scaladsl}
 import org.apache.pekko.cluster.typed.Cluster
 import org.apache.pekko.http.scaladsl.Http
 import org.apache.pekko.management.cluster.bootstrap.ClusterBootstrap
 import org.apache.pekko.management.scaladsl.PekkoManagement
 import org.apache.pekko.stream.Materializer
 import org.apache.pekko.util.Timeout
+import org.apache.pekko.{Done, pattern}
+import zio.*
 
 import scala.concurrent.duration.*
 import scala.concurrent.{Await, ExecutionContextExecutor, Future}
-import scala.concurrent.duration.Duration
-import zio.*
 
-object MainActor extends App {
-  private sealed trait Command
-  private case object Start extends Command
-  private case object Stop extends Command
+object MainActor {
+  sealed trait Command
+  case object Start extends Command
+  case object Stop extends Command
   private case class ServerStarted(binding: Http.ServerBinding, startTime: Long) extends Command
   private case class ServerFailed(ex: Throwable, startTime: Long) extends Command
 
+  def apply(): Behavior[Command] =
+    Behaviors.setup { context =>
+      implicit val system: ActorSystem[Nothing] = context.system
+      implicit val materializer: Materializer = Materializer(system)
+      implicit val executionContext: ExecutionContextExecutor = system.executionContext
+      implicit val scheduler: Scheduler = system.scheduler
+      implicit val zioRuntime: Runtime[Any] = Runtime.default
+
+      val serverConfig = ServerConfig.from(system.settings.config.getConfig("pcqrses.command-api"))
+      val isClusterEnabled = system.settings.config.hasPath("pekko.cluster.enabled") &&
+        system.settings.config.getBoolean("pekko.cluster.enabled")
+
+      implicit val timeout: Timeout = Timeout(serverConfig.actorTimeout)
+
+      context.log.info(
+        s"Command API server initializing... (timeout: ${serverConfig.actorTimeout}, host: ${serverConfig.host}:${serverConfig.port}, cluster: $isClusterEnabled)")
+
+      if (isClusterEnabled) {
+        initializeCluster(context)
+      }
+
+      // TODO: GraphQL Handler(Mutation) の初期化
+
+      Behaviors.same
+    }
+
   private def startManagementWithGracefulShutdown(
     context: scaladsl.ActorContext[Command],
     management: PekkoManagement,
@@ -79,7 +104,7 @@ object MainActor extends App {
     val coordinatedShutdown = CoordinatedShutdown(system)
     val config = system.settings.config
 
-    val lbConfig = LoadBalancerConfig.from(config.getConfig("command-api"))
+    val lbConfig = LoadBalancerConfig.from(config.getConfig("pcqrses.command-api"))
 
     startManagementWithGracefulShutdown(context, management, coordinatedShutdown, lbConfig)
 
@@ -90,34 +115,4 @@ object MainActor extends App {
     }
   }
 
-  private def apply(): Behavior[Command] =
-    Behaviors.setup { context =>
-      implicit val system: ActorSystem[Nothing] = context.system
-      implicit val materializer: Materializer = Materializer(system)
-      implicit val executionContext: ExecutionContextExecutor = system.executionContext
-      implicit val scheduler: Scheduler = system.scheduler
-      implicit val zioRuntime: Runtime[Any] = Runtime.default
-
-      val serverConfig = ServerConfig.from(system.settings.config.getConfig("command-api"))
-      val isClusterEnabled = system.settings.config.hasPath("pekko.cluster.enabled") &&
-        system.settings.config.getBoolean("pekko.cluster.enabled")
-
-      implicit val timeout: Timeout = Timeout(serverConfig.actorTimeout)
-
-      context.log.info(
-        s"Command API server initializing... (timeout: ${serverConfig.actorTimeout}, host: ${serverConfig.host}:${serverConfig.port}, cluster: $isClusterEnabled)")
-
-      if (isClusterEnabled) {
-        initializeCluster(context)
-      }
-
-      // TODO: GraphQL Handler(Mutation) の初期化
-
-      Behaviors.same
-    }
-
-  private val system: ActorSystem[Command] = ActorSystem(apply(), "command-api-system")
-  system ! Start
-
-  Await.result(system.whenTerminated, Duration.Inf)
 }
diff --git a/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/config/LoadBalancerConfig.scala b/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/config/LoadBalancerConfig.scala
index d6d57ad..70d173b 100644
--- a/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/config/LoadBalancerConfig.scala
+++ b/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/config/LoadBalancerConfig.scala
@@ -12,7 +12,7 @@ final case class LoadBalancerConfig(
 object LoadBalancerConfig {
   def from(config: Config): LoadBalancerConfig =
     LoadBalancerConfig(
-      detachWaitDuration = config.getDuration("detach-wait-duration").toScala,
-      healthCheckGracePeriod = config.getDuration("health-check-grace-period").toScala
+      detachWaitDuration = config.getDuration("load-balancer.detach-wait-duration").toScala,
+      healthCheckGracePeriod = config.getDuration("load-balancer.health-check-grace-period").toScala
     )
 }
diff --git a/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/config/ServerConfig.scala b/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/config/ServerConfig.scala
index bf31952..3bc5167 100644
--- a/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/config/ServerConfig.scala
+++ b/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/config/ServerConfig.scala
@@ -13,12 +13,11 @@ final case class ServerConfig(
 
 object ServerConfig {
   def from(config: Config): ServerConfig = {
-    val commandApiconfig = config.getConfig("pcqrses.command-api")
     ServerConfig(
-      host = commandApiconfig.getString("host"),
-      port = commandApiconfig.getInt("port"),
-      actorTimeout = commandApiconfig.getDuration("actor-timeout").toScala,
-      shutdownTimeout = commandApiconfig.getDuration("shutdown-timeout").toScala
+      host = config.getString("server.host"),
+      port = config.getInt("server.port"),
+      actorTimeout = config.getDuration("actor-timeout").toScala,
+      shutdownTimeout = config.getDuration("server.shutdown-timeout").toScala
     )
   }
 }
diff --git a/modules/command/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/command/interfaceAdapter/aggregate/CborSerializable.scala b/modules/command/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/command/interfaceAdapter/aggregate/CborSerializable.scala
new file mode 100644
index 0000000..eef649e
--- /dev/null
+++ b/modules/command/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/command/interfaceAdapter/aggregate/CborSerializable.scala
@@ -0,0 +1,6 @@
+package io.github.j5ik2o.pcqrses.command.interfaceAdapter.aggregate
+
+/**
+ * Marker trait for messages to be serialized with Jackson CBOR
+ */
+trait CborSerializable
\ No newline at end of file

```

## コミット: 668e086

### メッセージ

```
feat: Query APIサーバーの実装
- MainActorでHTTPサーバーとGraphQLサービスの初期化を実装
- GraphQLエンドポイント（/api/graphql, /api/playground, /api/health）を追加
- 設定ファイル（application.conf, pcqrses.conf, logback.xml）を追加
- データベース接続とHikariCPプールの設定
```

### 変更されたファイル

- A	apps/query-api/src/main/resources/application.conf
- A	apps/query-api/src/main/resources/logback.xml
- A	apps/query-api/src/main/resources/pcqrses.conf
- A	apps/query-api/src/main/scala/io/github/j5ik2o/pcqrses/queryApi/Main.scala
- M	apps/query-api/src/main/scala/io/github/j5ik2o/pcqrses/queryApi/MainActor.scala
- A	apps/query-api/src/main/scala/io/github/j5ik2o/pcqrses/queryApi/routes/GraphQLRoutes.scala

### 変更内容

```diff
commit 668e08659395387d4a545c8ad1368e0e93fcfd91
Author: Junichi Kato <j5ik2o@gmail.com>
Date:   Fri Sep 19 17:39:51 2025 +0900

    feat: Query APIサーバーの実装
    
    - MainActorでHTTPサーバーとGraphQLサービスの初期化を実装
    - GraphQLエンドポイント（/api/graphql, /api/playground, /api/health）を追加
    - 設定ファイル（application.conf, pcqrses.conf, logback.xml）を追加
    - データベース接続とHikariCPプールの設定

diff --git a/apps/query-api/src/main/resources/application.conf b/apps/query-api/src/main/resources/application.conf
new file mode 100644
index 0000000..0b149ed
--- /dev/null
+++ b/apps/query-api/src/main/resources/application.conf
@@ -0,0 +1,30 @@
+include "pcqrses.conf"
+
+pekko {
+  stdout-loglevel = "INFO"
+
+  actor {
+    provider = "local"
+  }
+
+  loggers = ["org.apache.pekko.event.slf4j.Slf4jLogger"]
+  loglevel = "INFO"
+  loglevel = ${?PEKKO_LOG_LEVEL}
+  logging-filter = "org.apache.pekko.event.slf4j.Slf4jLoggingFilter"
+
+  log-dead-letters = 10
+  log-dead-letters-during-shutdown = on
+
+  http {
+    server {
+      idle-timeout = 60 s
+      request-timeout = 30 s
+      bind-timeout = 10 s
+      max-connections = 1024
+
+      parsing {
+        max-content-length = 8m
+      }
+    }
+  }
+}
diff --git a/apps/query-api/src/main/resources/logback.xml b/apps/query-api/src/main/resources/logback.xml
new file mode 100644
index 0000000..25e8c49
--- /dev/null
+++ b/apps/query-api/src/main/resources/logback.xml
@@ -0,0 +1,31 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<configuration>
+    <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
+        <encoder>
+            <pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>
+        </encoder>
+    </appender>
+
+    <root level="INFO">
+        <appender-ref ref="STDOUT" />
+    </root>
+
+    <!-- Pekko logging -->
+    <logger name="org.apache.pekko" level="INFO" />
+
+    <!-- Application logging -->
+    <logger name="io.github.j5ik2o.pcqrses" level="DEBUG" />
+
+    <!-- Query API specific logging -->
+    <logger name="io.github.j5ik2o.pcqrses.queryApi" level="DEBUG" />
+
+    <!-- GraphQL logging -->
+    <logger name="io.github.j5ik2o.pcqrses.query.interfaceAdapter.graphql" level="DEBUG" />
+
+    <!-- Slick logging -->
+    <logger name="slick" level="INFO" />
+    <logger name="slick.jdbc" level="DEBUG" />
+
+    <!-- HikariCP logging -->
+    <logger name="com.zaxxer.hikari" level="INFO" />
+</configuration>
\ No newline at end of file
diff --git a/apps/query-api/src/main/resources/pcqrses.conf b/apps/query-api/src/main/resources/pcqrses.conf
new file mode 100644
index 0000000..948cd36
--- /dev/null
+++ b/apps/query-api/src/main/resources/pcqrses.conf
@@ -0,0 +1,26 @@
+pcqrses {
+  query-api {
+    host = "0.0.0.0"
+    host = ${?QUERY_API_HOST}
+    port = 9002
+    port = ${?QUERY_API_PORT}
+    shutdown-timeout = 30 seconds
+  }
+
+  database {
+    driver = "org.postgresql.Driver"
+    url = "jdbc:postgresql://localhost:5432/pcqrses_db"
+    url = ${?DATABASE_URL}
+    user = "postgres"
+    user = ${?DATABASE_USER}
+    password = "postgres"
+    password = ${?DATABASE_PASSWORD}
+    connectionPool = "HikariCP"
+    numThreads = 20
+    maxConnections = 20
+    minConnections = 5
+    connectionTimeout = 30000
+    idleTimeout = 600000
+    maxLifetime = 1800000
+  }
+}
diff --git a/apps/query-api/src/main/scala/io/github/j5ik2o/pcqrses/queryApi/Main.scala b/apps/query-api/src/main/scala/io/github/j5ik2o/pcqrses/queryApi/Main.scala
new file mode 100644
index 0000000..9e07ea7
--- /dev/null
+++ b/apps/query-api/src/main/scala/io/github/j5ik2o/pcqrses/queryApi/Main.scala
@@ -0,0 +1,11 @@
+package io.github.j5ik2o.pcqrses.queryApi
+import org.apache.pekko.actor.typed.ActorSystem
+
+import scala.concurrent.Await
+import scala.concurrent.duration.Duration
+
+object Main extends App {
+  private val system: ActorSystem[MainActor.Command] = ActorSystem(MainActor(), "query-api-system")
+  system ! MainActor.Start
+  Await.result(system.whenTerminated, Duration.Inf)
+}
diff --git a/apps/query-api/src/main/scala/io/github/j5ik2o/pcqrses/queryApi/MainActor.scala b/apps/query-api/src/main/scala/io/github/j5ik2o/pcqrses/queryApi/MainActor.scala
index 2638da1..800ab3d 100644
--- a/apps/query-api/src/main/scala/io/github/j5ik2o/pcqrses/queryApi/MainActor.scala
+++ b/apps/query-api/src/main/scala/io/github/j5ik2o/pcqrses/queryApi/MainActor.scala
@@ -1,24 +1,92 @@
 package io.github.j5ik2o.pcqrses.queryApi
 
+import io.github.j5ik2o.pcqrses.query.interfaceAdapter.graphql.GraphQLService
+import io.github.j5ik2o.pcqrses.queryApi.config.ServerConfig
+import io.github.j5ik2o.pcqrses.queryApi.routes.GraphQLRoutes
+import org.apache.pekko.actor.CoordinatedShutdown
 import org.apache.pekko.actor.typed.scaladsl.Behaviors
 import org.apache.pekko.actor.typed.{ActorSystem, Behavior}
+import org.apache.pekko.http.scaladsl.Http
+import org.apache.pekko.http.scaladsl.server.Directives._
+import org.apache.pekko.stream.Materializer
+import slick.jdbc.PostgresProfile
+import slick.jdbc.PostgresProfile.api._
 
-import scala.concurrent.duration.Duration
-import scala.concurrent.{Await, ExecutionContextExecutor}
+import scala.concurrent.ExecutionContextExecutor
+import scala.util.{Failure, Success}
 
-object MainActor extends App {
-  private sealed trait Command
-  private case object Start extends Command
-  private case object Stop extends Command
+object MainActor {
+  sealed trait Command
+  case object Start extends Command
+  case object Stop extends Command
+  private case class ServerStarted(binding: Http.ServerBinding) extends Command
+  private case class ServerFailed(ex: Throwable) extends Command
 
-  private def apply(): Behavior[Command] = Behaviors.setup[Command] { context =>
+  def apply(): Behavior[Command] = Behaviors.setup[Command] { context =>
+    context.log.info("Setting up MainActor")
+    implicit val system: ActorSystem[Nothing] = context.system
+    implicit val materializer: Materializer = Materializer(system)
     implicit val executionContext: ExecutionContextExecutor = system.executionContext
-    // TODO: GraphQL Handler(Query) の初期化
-    Behaviors.empty
-  }
 
-  private val system: ActorSystem[Command] = ActorSystem(apply(), "query-api-system")
-  system ! Start
+    val config = system.settings.config
+    val serverConfig = ServerConfig.from(config)
+
+    context.log.info(s"Initializing Query API server with config: host=${serverConfig.host}, port=${serverConfig.port}")
+
+    // データベース接続の初期化
+    val dbConfig = config.getConfig("pcqrses.database")
+    val db = Database.forConfig("", dbConfig)
+    context.log.info("Database connection initialized")
+
+    // GraphQLサービスの初期化
+    val graphQLService = GraphQLService(PostgresProfile, db)
+    context.log.info("GraphQL service initialized")
+
+    // ルートの定義
+    val graphQLRoutes = new GraphQLRoutes(graphQLService)
+    val routes = pathPrefix("api") {
+      graphQLRoutes.routes
+    }
+
+    Behaviors.receiveMessage {
+      case Start =>
+        context.log.info(s"Starting Query API server on ${serverConfig.host}:${serverConfig.port}")
+
+        // HTTPサーバーの起動
+        val serverBinding = Http()
+          .newServerAt(serverConfig.host, serverConfig.port)
+          .bind(routes)
+
+        context.pipeToSelf(serverBinding) {
+          case Success(binding) => ServerStarted(binding)
+          case Failure(ex) => ServerFailed(ex)
+        }
+
+        // グレースフルシャットダウンの設定
+        CoordinatedShutdown(system).addTask(
+          CoordinatedShutdown.PhaseServiceUnbind, "http-server-unbind"
+        ) { () =>
+          serverBinding.flatMap(_.unbind()).map(_ => org.apache.pekko.Done)
+        }
+
+        Behaviors.same
+
+      case ServerStarted(binding) =>
+        context.log.info(s"Query API server started: ${binding.localAddress}")
+        Behaviors.same
+
+      case ServerFailed(ex) =>
+        context.log.error(s"Failed to start Query API server", ex)
+        throw ex
+
+      case Stop =>
+        context.log.info("Stopping Query API server")
+        db.close()
+        Behaviors.stopped
+    }
+  }
 
-  Await.result(system.whenTerminated, Duration.Inf)
 }
+
+
+
diff --git a/apps/query-api/src/main/scala/io/github/j5ik2o/pcqrses/queryApi/routes/GraphQLRoutes.scala b/apps/query-api/src/main/scala/io/github/j5ik2o/pcqrses/queryApi/routes/GraphQLRoutes.scala
new file mode 100644
index 0000000..d181c4e
--- /dev/null
+++ b/apps/query-api/src/main/scala/io/github/j5ik2o/pcqrses/queryApi/routes/GraphQLRoutes.scala
@@ -0,0 +1,110 @@
+package io.github.j5ik2o.pcqrses.queryApi.routes
+
+import io.github.j5ik2o.pcqrses.query.interfaceAdapter.graphql.GraphQLService
+import org.apache.pekko.http.scaladsl.model.{ContentTypes, HttpEntity, HttpResponse, StatusCodes}
+import org.apache.pekko.http.scaladsl.server.Directives._
+import org.apache.pekko.http.scaladsl.server.Route
+import com.github.pjfanning.pekkohttpcirce.FailFastCirceSupport._
+import io.circe.Json
+import io.circe.generic.auto._
+
+import scala.concurrent.ExecutionContext
+
+/**
+ * GraphQLエンドポイントのルート定義
+ */
+class GraphQLRoutes(graphQLService: GraphQLService)(implicit ec: ExecutionContext) {
+
+  /**
+   * GraphQL用リクエストボディ
+   */
+  case class GraphQLRequest(
+    query: String,
+    operationName: Option[String] = None,
+    variables: Option[Json] = None
+  )
+
+  /**
+   * GraphQL Playgroundの簡易HTML
+   */
+  private val playgroundHtml = """
+    |<!DOCTYPE html>
+    |<html>
+    |<head>
+    |  <meta charset="utf-8">
+    |  <title>GraphQL Playground</title>
+    |  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/graphql-playground-react@1.7.26/build/static/css/index.css" />
+    |  <script src="https://cdn.jsdelivr.net/npm/graphql-playground-react@1.7.26/build/static/js/middleware.js"></script>
+    |</head>
+    |<body>
+    |  <div id="root"></div>
+    |  <script>
+    |    window.addEventListener('load', function (event) {
+    |      GraphQLPlayground.init(document.getElementById('root'), {
+    |        endpoint: '/api/graphql',
+    |        settings: {
+    |          'request.credentials': 'same-origin'
+    |        }
+    |      })
+    |    })
+    |  </script>
+    |</body>
+    |</html>
+  """.stripMargin
+
+  val routes: Route = {
+    concat(
+      path("graphql") {
+        concat(
+          // GraphQLクエリを処理
+          post {
+            entity(as[GraphQLRequest]) { request =>
+              complete {
+                graphQLService.executeQuery(
+                  query = request.query,
+                  operationName = request.operationName,
+                  variables = request.variables
+                ).map { result =>
+                  StatusCodes.OK -> result
+                }.recover {
+                  case ex: Exception =>
+                    StatusCodes.InternalServerError -> Json.obj(
+                      "errors" -> Json.arr(
+                        Json.obj("message" -> Json.fromString(ex.getMessage))
+                      )
+                    )
+                }
+              }
+            }
+          },
+          // GraphQL Playgroundを表示
+          get {
+            complete(HttpResponse(entity = HttpEntity(ContentTypes.`text/html(UTF-8)`, playgroundHtml)))
+          }
+        )
+      },
+      // GraphQL Playgroundの別エンドポイント
+      path("playground") {
+        get {
+          complete(HttpResponse(entity = HttpEntity(ContentTypes.`text/html(UTF-8)`, playgroundHtml)))
+        }
+      },
+      // GraphQL introspection専用エンドポイント
+      path("graphql" / "schema") {
+        get {
+          complete {
+            graphQLService.introspectionQuery().map { result =>
+              StatusCodes.OK -> result
+            }
+          }
+        }
+      },
+      // ヘルスチェック
+      path("health") {
+        get {
+          complete(StatusCodes.OK -> Json.obj("status" -> Json.fromString("healthy")))
+        }
+      }
+    )
+  }
+}
\ No newline at end of file

```

## コミット: c7de5fc

### メッセージ

```
fix: GraphQL introspectionクエリの深さ制限を緩和
- introspectionクエリ専用に深さ制限を30に拡張
- 通常のクエリは10のまま維持
- executeQueryメソッドにisIntrospectionパラメータを追加
```

### 変更されたファイル

- M	modules/query/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/graphql/GraphQLService.scala

### 変更内容

```diff
commit c7de5fcb30e76743e0809c9006efcee8d421b939
Author: Junichi Kato <j5ik2o@gmail.com>
Date:   Fri Sep 19 17:39:30 2025 +0900

    fix: GraphQL introspectionクエリの深さ制限を緩和
    
    - introspectionクエリ専用に深さ制限を30に拡張
    - 通常のクエリは10のまま維持
    - executeQueryメソッドにisIntrospectionパラメータを追加

diff --git a/modules/query/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/graphql/GraphQLService.scala b/modules/query/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/graphql/GraphQLService.scala
index c8f02d1..3095634 100644
--- a/modules/query/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/graphql/GraphQLService.scala
+++ b/modules/query/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/graphql/GraphQLService.scala
@@ -30,18 +30,23 @@ class GraphQLService(
    * @param query GraphQLクエリ文字列
    * @param operationName オプションのオペレーション名
    * @param variables オプションの変数マップ
+   * @param isIntrospection イントロスペクションクエリかどうか
    * @return 実行結果のJSON
    */
   def executeQuery(
     query: String,
     operationName: Option[String] = None,
-    variables: Option[Json] = None
+    variables: Option[Json] = None,
+    isIntrospection: Boolean = false
   ): Future[Json] = {
     QueryParser.parse(query) match {
       case Success(queryAst) =>
         val context = ResolverContext.fromSlickDatabase(db)
         val vars = variables.getOrElse(Json.obj())
 
+        // introspectionクエリの場合は深さ制限を緩和
+        val maxDepth = if (isIntrospection) 30 else 10
+
         Executor.execute(
           schema = schema,
           queryAst = queryAst,
@@ -49,7 +54,7 @@ class GraphQLService(
           variables = vars,
           operationName = operationName,
           queryReducers = List(
-            QueryReducer.rejectMaxDepth(10),
+            QueryReducer.rejectMaxDepth(maxDepth),
             QueryReducer.rejectComplexQueries(1000.0, (complexity: Double, _: Any) =>
               new Exception(s"Query too complex: $complexity"))
           )
@@ -96,7 +101,7 @@ class GraphQLService(
         val variables = json.hcursor.downField("variables").as[Json].toOption
 
         query match {
-          case Some(q) => executeQuery(q, operationName, variables)
+          case Some(q) => executeQuery(q, operationName, variables, isIntrospection = false)
           case None =>
             Future.successful(
               Json.obj("errors" -> Json.arr(Json.obj("message" -> Json.fromString("No query provided"))))
@@ -118,7 +123,7 @@ class GraphQLService(
   def introspectionQuery(): Future[Json] = {
     import sangria.renderer.QueryRenderer
     val introspectionQueryString = QueryRenderer.render(sangria.introspection.introspectionQuery)
-    executeQuery(introspectionQueryString)
+    executeQuery(introspectionQueryString, isIntrospection = true)
   }
 }
 

```

## コミット: f8b14ed

### メッセージ

```
feat: UserAccountsDaoにfindByIdメソッドを追加
GraphQLリゾルバーから単一ユーザー検索を可能にするため、
UserAccountsExtensionsにfindByIdメソッドを追加。
```

### 変更されたファイル

- M	modules/query/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/dao/UserAccountsExtensions.scala

### 変更内容

```diff
commit f8b14eda74e368903a28ee063830a0b3b6087eb9
Author: Junichi Kato <j5ik2o@gmail.com>
Date:   Fri Sep 19 14:34:01 2025 +0900

    feat: UserAccountsDaoにfindByIdメソッドを追加
    
    GraphQLリゾルバーから単一ユーザー検索を可能にするため、
    UserAccountsExtensionsにfindByIdメソッドを追加。

diff --git a/modules/query/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/dao/UserAccountsExtensions.scala b/modules/query/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/dao/UserAccountsExtensions.scala
index a70888a..4b139fb 100644
--- a/modules/query/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/dao/UserAccountsExtensions.scala
+++ b/modules/query/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/dao/UserAccountsExtensions.scala
@@ -8,5 +8,7 @@ trait UserAccountsExtensions {
       dao.result
     def findByIds(ids: Seq[String]): DBIO[Seq[UserAccountsRecord]] =
       dao.filter(_.id inSet ids).result
+    def findById(id: String): DBIO[Option[UserAccountsRecord]] =
+      dao.filter(_.id === id).result.headOption
   }
 }

```

## コミット: 4793a73

### メッセージ

```
refactor: GraphQLスキーマとリゾルバーの責任を分離
クエリ側のGraphQL実装を改善し、責任を明確に分離した新しい構造に変更。

主な変更内容:
- TypeDefinitions: GraphQL型定義のみを担当
- QueryResolver: クエリリゾルバーロジックを担当
- ResolverContext: DB実行を抽象化してテスタブルに
- GraphQLSchema: 各traitを結合してスキーマを生成
- GraphQLService: GraphQL実行とエラーハンドリング
- ScalarTypes: カスタムスカラー型を独立管理

改善効果:
- 単一責任原則の遵守
- テスタビリティの向上（モック可能な設計）
- 拡張性の向上（新しいリゾルバー追加が容易）
- Slickの制約への対応（DBIOをコンテキスト経由で実行）

テスト追加:
- ResolverContext、GraphQLSchema、GraphQLServiceの単体テスト
- 全13テストが成功することを確認
```

### 変更されたファイル

- A	modules/command/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/command/interfaceAdapter/graphql/SchemaDefinition.scala
- A	modules/query/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/graphql/DateTimeCoercionViolation.scala
- A	modules/query/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/graphql/GraphQLService.scala
- A	modules/query/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/graphql/ResolverContext.scala
- A	modules/query/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/graphql/resolvers/QueryResolver.scala
- A	modules/query/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/graphql/schema/GraphQLSchema.scala
- A	modules/query/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/graphql/schema/ScalarTypes.scala
- A	modules/query/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/graphql/schema/TypeDefinitions.scala
- A	modules/query/interface-adapter/src/test/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/graphql/GraphQLServiceSpec.scala
- A	modules/query/interface-adapter/src/test/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/graphql/ResolverContextSpec.scala
- A	modules/query/interface-adapter/src/test/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/graphql/schema/GraphQLSchemaSpec.scala

### 変更内容

```diff
commit 4793a736119b389796e4bb2cdb789fe82dc3d4f1
Author: Junichi Kato <j5ik2o@gmail.com>
Date:   Fri Sep 19 14:33:27 2025 +0900

    refactor: GraphQLスキーマとリゾルバーの責任を分離
    
    クエリ側のGraphQL実装を改善し、責任を明確に分離した新しい構造に変更。
    
    主な変更内容:
    - TypeDefinitions: GraphQL型定義のみを担当
    - QueryResolver: クエリリゾルバーロジックを担当
    - ResolverContext: DB実行を抽象化してテスタブルに
    - GraphQLSchema: 各traitを結合してスキーマを生成
    - GraphQLService: GraphQL実行とエラーハンドリング
    - ScalarTypes: カスタムスカラー型を独立管理
    
    改善効果:
    - 単一責任原則の遵守
    - テスタビリティの向上（モック可能な設計）
    - 拡張性の向上（新しいリゾルバー追加が容易）
    - Slickの制約への対応（DBIOをコンテキスト経由で実行）
    
    テスト追加:
    - ResolverContext、GraphQLSchema、GraphQLServiceの単体テスト
    - 全13テストが成功することを確認

diff --git a/modules/command/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/command/interfaceAdapter/graphql/SchemaDefinition.scala b/modules/command/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/command/interfaceAdapter/graphql/SchemaDefinition.scala
new file mode 100644
index 0000000..8dcbe2a
--- /dev/null
+++ b/modules/command/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/command/interfaceAdapter/graphql/SchemaDefinition.scala
@@ -0,0 +1,3 @@
+package io.github.j5ik2o.pcqrses.command.interfaceAdapter.graphql object SchemaDefinition {
+
+}
diff --git a/modules/query/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/graphql/DateTimeCoercionViolation.scala b/modules/query/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/graphql/DateTimeCoercionViolation.scala
new file mode 100644
index 0000000..656ceee
--- /dev/null
+++ b/modules/query/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/graphql/DateTimeCoercionViolation.scala
@@ -0,0 +1,5 @@
+package io.github.j5ik2o.pcqrses.query.interfaceAdapter.graphql
+
+import sangria.validation.ValueCoercionViolation
+
+case object DateTimeCoercionViolation extends ValueCoercionViolation("DateTime expected")
diff --git a/modules/query/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/graphql/GraphQLService.scala b/modules/query/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/graphql/GraphQLService.scala
new file mode 100644
index 0000000..c8f02d1
--- /dev/null
+++ b/modules/query/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/graphql/GraphQLService.scala
@@ -0,0 +1,137 @@
+package io.github.j5ik2o.pcqrses.query.interfaceAdapter.graphql
+
+import io.github.j5ik2o.pcqrses.query.interfaceAdapter.graphql.schema.GraphQLSchema
+import sangria.execution.{ErrorWithResolver, Executor, QueryReducer}
+import sangria.marshalling.circe.*
+import sangria.parser.{QueryParser, SyntaxError}
+import slick.jdbc.JdbcProfile
+import io.circe.Json
+import io.circe.parser.*
+
+import scala.concurrent.{ExecutionContext, Future}
+import scala.util.{Failure, Success}
+
+/**
+ * GraphQL実行サービス
+ *
+ * GraphQLクエリの解析、実行、エラーハンドリングを担当する。
+ */
+class GraphQLService(
+  profile: JdbcProfile,
+  db: JdbcProfile#Backend#Database
+)(implicit ec: ExecutionContext) {
+
+  private val graphQLSchema = GraphQLSchema(profile)
+  private val schema = graphQLSchema.schema
+
+  /**
+   * GraphQLクエリを実行
+   *
+   * @param query GraphQLクエリ文字列
+   * @param operationName オプションのオペレーション名
+   * @param variables オプションの変数マップ
+   * @return 実行結果のJSON
+   */
+  def executeQuery(
+    query: String,
+    operationName: Option[String] = None,
+    variables: Option[Json] = None
+  ): Future[Json] = {
+    QueryParser.parse(query) match {
+      case Success(queryAst) =>
+        val context = ResolverContext.fromSlickDatabase(db)
+        val vars = variables.getOrElse(Json.obj())
+
+        Executor.execute(
+          schema = schema,
+          queryAst = queryAst,
+          userContext = context,
+          variables = vars,
+          operationName = operationName,
+          queryReducers = List(
+            QueryReducer.rejectMaxDepth(10),
+            QueryReducer.rejectComplexQueries(1000.0, (complexity: Double, _: Any) =>
+              new Exception(s"Query too complex: $complexity"))
+          )
+        ).recover {
+          case error: ErrorWithResolver =>
+            Json.obj("errors" -> Json.arr(Json.obj("message" -> Json.fromString(error.getMessage))))
+        }
+
+      case Failure(error: SyntaxError) =>
+        Future.successful(
+          Json.obj(
+            "errors" -> Json.arr(
+              Json.obj(
+                "message" -> Json.fromString(s"Syntax error: ${error.getMessage}"),
+                "locations" -> Json.arr(
+                  Json.obj(
+                    "line" -> Json.fromInt(error.originalError.position.line),
+                    "column" -> Json.fromInt(error.originalError.position.column)
+                  )
+                )
+              )
+            )
+          )
+        )
+
+      case Failure(error) =>
+        Future.successful(
+          Json.obj("errors" -> Json.arr(Json.obj("message" -> Json.fromString(error.getMessage))))
+        )
+    }
+  }
+
+  /**
+   * JSONリクエストからGraphQLクエリを実行
+   *
+   * @param requestJson リクエストJSON（query, operationName, variablesを含む）
+   * @return 実行結果のJSON
+   */
+  def executeQueryFromJson(requestJson: String): Future[Json] = {
+    parse(requestJson) match {
+      case Right(json) =>
+        val query = json.hcursor.downField("query").as[String].toOption
+        val operationName = json.hcursor.downField("operationName").as[String].toOption
+        val variables = json.hcursor.downField("variables").as[Json].toOption
+
+        query match {
+          case Some(q) => executeQuery(q, operationName, variables)
+          case None =>
+            Future.successful(
+              Json.obj("errors" -> Json.arr(Json.obj("message" -> Json.fromString("No query provided"))))
+            )
+        }
+
+      case Left(error) =>
+        Future.successful(
+          Json.obj("errors" -> Json.arr(Json.obj("message" -> Json.fromString(s"Invalid JSON: ${error.getMessage}"))))
+        )
+    }
+  }
+
+  /**
+   * GraphQLスキーマのイントロスペクションクエリを実行
+   *
+   * @return スキーマ情報のJSON
+   */
+  def introspectionQuery(): Future[Json] = {
+    import sangria.renderer.QueryRenderer
+    val introspectionQueryString = QueryRenderer.render(sangria.introspection.introspectionQuery)
+    executeQuery(introspectionQueryString)
+  }
+}
+
+object GraphQLService {
+  /**
+   * GraphQLServiceインスタンスを生成
+   *
+   * @param profile JdbcProfile (例: PostgresProfile)
+   * @param db データベース接続
+   * @param ec ExecutionContext
+   * @return GraphQLServiceインスタンス
+   */
+  def apply(profile: JdbcProfile, db: JdbcProfile#Backend#Database)(
+    implicit ec: ExecutionContext): GraphQLService =
+    new GraphQLService(profile, db)
+}
\ No newline at end of file
diff --git a/modules/query/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/graphql/ResolverContext.scala b/modules/query/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/graphql/ResolverContext.scala
new file mode 100644
index 0000000..2ba3de9
--- /dev/null
+++ b/modules/query/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/graphql/ResolverContext.scala
@@ -0,0 +1,65 @@
+package io.github.j5ik2o.pcqrses.query.interfaceAdapter.graphql
+
+import slick.jdbc.JdbcProfile
+import slick.dbio.DBIO
+
+import scala.concurrent.{ExecutionContext, Future}
+
+/**
+ * GraphQLリゾルバー用のコンテキスト
+ *
+ * データベース操作の実行機能とその他の共通リソースを提供する。
+ * DIコンテナを使わずにSlickのDBアクセスを抽象化する役割を持つ。
+ */
+final case class ResolverContext(
+  private val dbRunner: DBIO[?] => Future[?],
+  private val executionContext: ExecutionContext
+) {
+  implicit val ec: ExecutionContext = executionContext
+
+  /**
+   * DBIOアクションを実行する
+   *
+   * @param action 実行するDBIOアクション
+   * @return 実行結果のFuture
+   */
+  def runDbAction[T](action: DBIO[T]): Future[T] =
+    dbRunner(action).asInstanceOf[Future[T]]
+
+  /**
+   * トランザクション内でDBIOアクションを実行する
+   *
+   * @param action 実行するDBIOアクション
+   * @return 実行結果のFuture
+   */
+  def runDbActionTransactionally[T](action: DBIO[T])(implicit profile: JdbcProfile): Future[T] = {
+    import profile.api._
+    runDbAction(action.transactionally)
+  }
+}
+
+object ResolverContext {
+  /**
+   * Slickのデータベース接続からResolverContextを生成
+   *
+   * @param db Slickのデータベース接続
+   * @param ec ExecutionContext
+   * @return ResolverContextインスタンス
+   */
+  def fromSlickDatabase(db: JdbcProfile#Backend#Database)(implicit ec: ExecutionContext): ResolverContext = {
+    ResolverContext(
+      dbRunner = action => db.run(action.asInstanceOf[DBIO[Any]]),
+      executionContext = ec
+    )
+  }
+
+  /**
+   * テスト用のモックコンテキストを作成
+   *
+   * @param mockRunner モック用のDBランナー関数
+   * @param ec ExecutionContext
+   * @return ResolverContextインスタンス
+   */
+  def forTesting(mockRunner: DBIO[?] => Future[?])(implicit ec: ExecutionContext): ResolverContext =
+    ResolverContext(mockRunner, ec)
+}
\ No newline at end of file
diff --git a/modules/query/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/graphql/resolvers/QueryResolver.scala b/modules/query/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/graphql/resolvers/QueryResolver.scala
new file mode 100644
index 0000000..63ca3d6
--- /dev/null
+++ b/modules/query/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/graphql/resolvers/QueryResolver.scala
@@ -0,0 +1,61 @@
+package io.github.j5ik2o.pcqrses.query.interfaceAdapter.graphql.resolvers
+
+import io.github.j5ik2o.pcqrses.query.interfaceAdapter.dao.UserAccountsComponent
+import io.github.j5ik2o.pcqrses.query.interfaceAdapter.graphql.ResolverContext
+import io.github.j5ik2o.pcqrses.query.interfaceAdapter.graphql.schema.TypeDefinitions
+import sangria.schema.*
+
+trait QueryResolver extends TypeDefinitions {
+  this: UserAccountsComponent =>
+
+  val QueryType: ObjectType[ResolverContext, Unit] = ObjectType(
+    "Query",
+    "Root query type",
+    fields[ResolverContext, Unit](
+      Field(
+        "getUserAccount",
+        OptionType(UserAccountType),
+        description = Some("Get a single user account by ID"),
+        arguments = UserAccountIdArg :: Nil,
+        resolve = ctx => {
+          val id = ctx.arg(UserAccountIdArg)
+          ctx.ctx.runDbAction(UserAccountsDao.findById(id))
+        }
+      ),
+      Field(
+        "getUserAccounts",
+        ListType(UserAccountType),
+        description = Some("Get all user accounts"),
+        resolve = ctx => {
+          ctx.ctx.runDbAction(UserAccountsDao.findAll())
+        }
+      ),
+      Field(
+        "getUserAccountsByIds",
+        ListType(UserAccountType),
+        description = Some("Get multiple user accounts by IDs"),
+        arguments = UserAccountIdsArg :: Nil,
+        resolve = ctx => {
+          val ids = ctx.arg(UserAccountIdsArg).asInstanceOf[Seq[String]]
+          ctx.ctx.runDbAction(UserAccountsDao.findByIds(ids))
+        }
+      ),
+      Field(
+        "searchUserAccounts",
+        ListType(UserAccountType),
+        description = Some("Search user accounts by name"),
+        arguments = Argument("searchTerm", StringType, description = "Search term for name") :: Nil,
+        resolve = ctx => {
+          val searchTerm = ctx.arg[String]("searchTerm")
+          ctx.ctx.runDbAction {
+            import profile.api._
+            UserAccountsDao
+              .filter(u => u.firstName.toLowerCase.like(s"%${searchTerm.toLowerCase}%") ||
+                           u.lastName.toLowerCase.like(s"%${searchTerm.toLowerCase}%"))
+              .result
+          }
+        }
+      )
+    )
+  )
+}
\ No newline at end of file
diff --git a/modules/query/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/graphql/schema/GraphQLSchema.scala b/modules/query/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/graphql/schema/GraphQLSchema.scala
new file mode 100644
index 0000000..d8f4a25
--- /dev/null
+++ b/modules/query/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/graphql/schema/GraphQLSchema.scala
@@ -0,0 +1,40 @@
+package io.github.j5ik2o.pcqrses.query.interfaceAdapter.graphql.schema
+
+import io.github.j5ik2o.pcqrses.query.interfaceAdapter.dao.UserAccountsComponent
+import io.github.j5ik2o.pcqrses.query.interfaceAdapter.graphql.ResolverContext
+import io.github.j5ik2o.pcqrses.query.interfaceAdapter.graphql.resolvers.QueryResolver
+import sangria.schema.Schema
+import slick.jdbc.JdbcProfile
+
+/**
+ * GraphQLスキーマを構築するためのファクトリー
+ *
+ * 型定義とリゾルバーを結合してSangriaのSchemaインスタンスを生成する。
+ */
+class GraphQLSchema(override val profile: JdbcProfile)
+  extends UserAccountsComponent
+    with TypeDefinitions
+    with QueryResolver {
+
+  /**
+   * GraphQLスキーマを生成
+   *
+   * @return 完全なGraphQLスキーマ
+   */
+  def schema: Schema[ResolverContext, Unit] = Schema(
+    query = QueryType,
+    mutation = None, // 将来的にMutationResolverを追加
+    subscription = None // 将来的にSubscriptionResolverを追加
+  )
+}
+
+object GraphQLSchema {
+  /**
+   * GraphQLスキーマインスタンスを生成
+   *
+   * @param profile JdbcProfile (例: PostgresProfile)
+   * @return GraphQLSchemaインスタンス
+   */
+  def apply(profile: JdbcProfile): GraphQLSchema =
+    new GraphQLSchema(profile)
+}
\ No newline at end of file
diff --git a/modules/query/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/graphql/schema/ScalarTypes.scala b/modules/query/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/graphql/schema/ScalarTypes.scala
new file mode 100644
index 0000000..c617ec7
--- /dev/null
+++ b/modules/query/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/graphql/schema/ScalarTypes.scala
@@ -0,0 +1,40 @@
+package io.github.j5ik2o.pcqrses.query.interfaceAdapter.graphql.schema
+
+import sangria.ast.StringValue
+import sangria.schema.ScalarType
+import sangria.validation.ValueCoercionViolation
+
+import java.time.OffsetDateTime
+import java.time.format.DateTimeFormatter
+
+object ScalarTypes {
+  case object DateTimeCoercionViolation extends ValueCoercionViolation("Date/time value expected")
+
+  implicit val OffsetDateTimeType: ScalarType[OffsetDateTime] = ScalarType[OffsetDateTime](
+    "DateTime",
+    description = Some("ISO-8601 compliant date-time with offset"),
+    coerceOutput = (value, _) => value.format(DateTimeFormatter.ISO_OFFSET_DATE_TIME),
+    coerceUserInput = {
+      case s: String =>
+        try
+          Right(OffsetDateTime.parse(s, DateTimeFormatter.ISO_OFFSET_DATE_TIME))
+        catch {
+          case _: Exception =>
+            Left(DateTimeCoercionViolation)
+        }
+      case _ =>
+        Left(DateTimeCoercionViolation)
+    },
+    coerceInput = {
+      case StringValue(s, _, _, _, _) =>
+        try
+          Right(OffsetDateTime.parse(s, DateTimeFormatter.ISO_OFFSET_DATE_TIME))
+        catch {
+          case _: Exception =>
+            Left(DateTimeCoercionViolation)
+        }
+      case _ =>
+        Left(DateTimeCoercionViolation)
+    }
+  )
+}
\ No newline at end of file
diff --git a/modules/query/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/graphql/schema/TypeDefinitions.scala b/modules/query/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/graphql/schema/TypeDefinitions.scala
new file mode 100644
index 0000000..995eb5c
--- /dev/null
+++ b/modules/query/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/graphql/schema/TypeDefinitions.scala
@@ -0,0 +1,49 @@
+package io.github.j5ik2o.pcqrses.query.interfaceAdapter.graphql.schema
+
+import io.github.j5ik2o.pcqrses.query.interfaceAdapter.dao.UserAccountsComponent
+import io.github.j5ik2o.pcqrses.query.interfaceAdapter.graphql.ResolverContext
+import sangria.schema.*
+import ScalarTypes.*
+
+import java.time.OffsetDateTime
+
+trait TypeDefinitions {
+  this: UserAccountsComponent =>
+
+  val UserAccountIdArg: Argument[String] =
+    Argument("userAccountId", StringType, description = "Id of UserAccount")
+
+  val UserAccountIdsArg =
+    Argument("userAccountIds", ListInputType(StringType), description = "List of UserAccount IDs")
+
+  val UserAccountType: ObjectType[ResolverContext, UserAccountsRecord] = ObjectType(
+    "UserAccount",
+    "User account information",
+    fields[ResolverContext, UserAccountsRecord](
+      Field("id", StringType,
+        description = Some("Unique identifier"),
+        resolve = _.value.id),
+      Field("firstName", StringType,
+        description = Some("User's first name"),
+        resolve = _.value.firstName),
+      Field("lastName", StringType,
+        description = Some("User's last name"),
+        resolve = _.value.lastName),
+      Field("fullName", StringType,
+        description = Some("User's full name"),
+        resolve = ctx => s"${ctx.value.firstName} ${ctx.value.lastName}"),
+      Field(
+        "createdAt",
+        OffsetDateTimeType,
+        description = Some("Account creation timestamp"),
+        resolve = t => OffsetDateTime.ofInstant(t.value.createdAt.toInstant, java.time.ZoneOffset.UTC)
+      ),
+      Field(
+        "updatedAt",
+        OffsetDateTimeType,
+        description = Some("Last update timestamp"),
+        resolve = t => OffsetDateTime.ofInstant(t.value.updatedAt.toInstant, java.time.ZoneOffset.UTC)
+      )
+    )
+  )
+}
\ No newline at end of file
diff --git a/modules/query/interface-adapter/src/test/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/graphql/GraphQLServiceSpec.scala b/modules/query/interface-adapter/src/test/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/graphql/GraphQLServiceSpec.scala
new file mode 100644
index 0000000..ce1bb74
--- /dev/null
+++ b/modules/query/interface-adapter/src/test/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/graphql/GraphQLServiceSpec.scala
@@ -0,0 +1,86 @@
+package io.github.j5ik2o.pcqrses.query.interfaceAdapter.graphql
+
+import org.scalatest.matchers.should.Matchers
+import org.scalatest.wordspec.AsyncWordSpec
+import io.circe.Json
+
+import scala.concurrent.ExecutionContext
+
+class GraphQLServiceSpec extends AsyncWordSpec with Matchers {
+  implicit val ec: ExecutionContext = ExecutionContext.global
+
+  "GraphQLService" should {
+    "handle syntax errors gracefully" in {
+      // GraphQLServiceの詳細なテストは、実際のデータベース接続が必要なため、
+      // 統合テストで実施することを推奨
+      // ここでは基本的な構造のテストのみ実施
+
+      val invalidQuery = """
+        query {
+          getUserAccounts {
+            id
+            firstName
+            // 不正な構文
+          }
+      """
+
+      // Sangriaのパーサーをテスト
+      val parseResult = sangria.parser.QueryParser.parse(invalidQuery)
+
+      parseResult.isFailure shouldBe true
+      parseResult.failed.get shouldBe a[sangria.parser.SyntaxError]
+      succeed
+    }
+
+    "parse valid GraphQL query" in {
+      val validQuery = """
+        query {
+          getUserAccounts {
+            id
+            firstName
+          }
+        }
+      """
+
+      val parseResult = sangria.parser.QueryParser.parse(validQuery)
+
+      parseResult.isSuccess shouldBe true
+      succeed
+    }
+
+    "parse query with variables" in {
+      val queryWithVars = """
+        query($id: String!) {
+          getUserAccount(userAccountId: $id) {
+            id
+            firstName
+            lastName
+          }
+        }
+      """
+
+      val parseResult = sangria.parser.QueryParser.parse(queryWithVars)
+
+      parseResult.isSuccess shouldBe true
+      succeed
+    }
+
+    "parse introspection query" in {
+      val introspectionQuery = """
+        query {
+          __schema {
+            types {
+              name
+              kind
+            }
+          }
+        }
+      """
+
+      val parseResult = sangria.parser.QueryParser.parse(introspectionQuery)
+
+      parseResult.isSuccess shouldBe true
+      succeed
+    }
+  }
+}
\ No newline at end of file
diff --git a/modules/query/interface-adapter/src/test/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/graphql/ResolverContextSpec.scala b/modules/query/interface-adapter/src/test/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/graphql/ResolverContextSpec.scala
new file mode 100644
index 0000000..3e44590
--- /dev/null
+++ b/modules/query/interface-adapter/src/test/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/graphql/ResolverContextSpec.scala
@@ -0,0 +1,39 @@
+package io.github.j5ik2o.pcqrses.query.interfaceAdapter.graphql
+
+import org.scalatest.matchers.should.Matchers
+import org.scalatest.wordspec.AsyncWordSpec
+import slick.dbio.DBIO
+
+import scala.concurrent.{ExecutionContext, Future}
+
+class ResolverContextSpec extends AsyncWordSpec with Matchers {
+  implicit val ec: ExecutionContext = ExecutionContext.global
+
+  "ResolverContext" should {
+    "execute DBIO actions through runDbAction" in {
+      val expectedValue = 42
+      val mockDbRunner: DBIO[?] => Future[?] = _ => Future.successful(expectedValue)
+      val context = ResolverContext.forTesting(mockDbRunner)
+
+      val action = DBIO.successful(expectedValue)
+      context.runDbAction(action).map { result =>
+        result shouldEqual expectedValue
+      }
+    }
+
+    "provide ExecutionContext" in {
+      val mockDbRunner: DBIO[?] => Future[?] = _ => Future.successful(())
+      val context = ResolverContext.forTesting(mockDbRunner)
+
+      context.ec shouldEqual ec
+    }
+
+    "create context from Slick database" in {
+      // This test verifies that the method exists and can be called
+      // In a real test, you would need an actual database connection
+      val contextCreator = ResolverContext.fromSlickDatabase
+      contextCreator should not be null
+      succeed
+    }
+  }
+}
\ No newline at end of file
diff --git a/modules/query/interface-adapter/src/test/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/graphql/schema/GraphQLSchemaSpec.scala b/modules/query/interface-adapter/src/test/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/graphql/schema/GraphQLSchemaSpec.scala
new file mode 100644
index 0000000..ddba193
--- /dev/null
+++ b/modules/query/interface-adapter/src/test/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/graphql/schema/GraphQLSchemaSpec.scala
@@ -0,0 +1,106 @@
+package io.github.j5ik2o.pcqrses.query.interfaceAdapter.graphql.schema
+
+import io.github.j5ik2o.pcqrses.query.interfaceAdapter.graphql.ResolverContext
+import org.scalatest.matchers.should.Matchers
+import org.scalatest.wordspec.AsyncWordSpec
+import sangria.execution.Executor
+import sangria.marshalling.circe.*
+import io.circe.Json
+import slick.dbio.DBIO
+import slick.jdbc.PostgresProfile
+
+import scala.concurrent.{ExecutionContext, Future}
+
+class GraphQLSchemaSpec extends AsyncWordSpec with Matchers {
+  implicit val ec: ExecutionContext = ExecutionContext.global
+
+  "GraphQLSchema" should {
+    "create a valid schema with Query type" in {
+      val schema = GraphQLSchema(PostgresProfile)
+
+      schema.schema should not be null
+      schema.schema.query.name shouldEqual "Query"
+      succeed
+    }
+
+    "have getUserAccount field in Query type" in {
+      val schema = GraphQLSchema(PostgresProfile)
+      val queryType = schema.schema.query
+
+      val field = queryType.fieldsByName.get("getUserAccount")
+      field should not be None
+      field.get.head.name shouldEqual "getUserAccount"
+      succeed
+    }
+
+    "have getUserAccounts field in Query type" in {
+      val schema = GraphQLSchema(PostgresProfile)
+      val queryType = schema.schema.query
+
+      val field = queryType.fieldsByName.get("getUserAccounts")
+      field should not be None
+      field.get.head.name shouldEqual "getUserAccounts"
+      succeed
+    }
+
+    "have getUserAccountsByIds field in Query type" in {
+      val schema = GraphQLSchema(PostgresProfile)
+      val queryType = schema.schema.query
+
+      val field = queryType.fieldsByName.get("getUserAccountsByIds")
+      field should not be None
+      field.get.head.name shouldEqual "getUserAccountsByIds"
+      succeed
+    }
+
+    "have searchUserAccounts field in Query type" in {
+      val schema = GraphQLSchema(PostgresProfile)
+      val queryType = schema.schema.query
+
+      val field = queryType.fieldsByName.get("searchUserAccounts")
+      field should not be None
+      field.get.head.name shouldEqual "searchUserAccounts"
+      succeed
+    }
+
+    "execute simple introspection query" in {
+      val schema = GraphQLSchema(PostgresProfile)
+      val mockDbRunner: DBIO[?] => Future[?] = _ => Future.successful(Seq.empty)
+      val context = ResolverContext.forTesting(mockDbRunner)
+
+      val introspectionQuery = """
+        query {
+          __schema {
+            types {
+              name
+            }
+          }
+        }
+      """
+
+      Executor.execute(
+        schema = schema.schema,
+        queryAst = sangria.parser.QueryParser.parse(introspectionQuery).get,
+        userContext = context
+      ).map { result =>
+        val json = result.asInstanceOf[Json]
+        val types = json.hcursor
+          .downField("data")
+          .downField("__schema")
+          .downField("types")
+          .as[List[Json]]
+
+        types match {
+          case Right(typeList) =>
+            val typeNames = typeList.flatMap(_.hcursor.get[String]("name").toOption)
+            typeNames should contain("UserAccount")
+            typeNames should contain("Query")
+            typeNames should contain("String")
+            typeNames should contain("DateTime")
+          case Left(err) =>
+            fail(s"Failed to parse introspection response: $err")
+        }
+      }
+    }
+  }
+}
\ No newline at end of file

```

## コミット: 0a88299

### メッセージ

```
chore: ビルド設定とデプロイスクリプトを更新
プロジェクトのビルドとデプロイメント設定を調整：
- データベース設定変数を整理（dbType, dbName, dbUserName, dbPassword）
- command-apiのメインクラスパスを修正
- Lambdaデプロイスクリプトの改善
```

### 変更されたファイル

- M	build.sbt
- M	scripts/deploy-lambda-localstack.sh

### 変更内容

```diff
commit 0a88299ddf0a9814a1160fa9eaf716e78cccc39a
Author: Junichi Kato <j5ik2o@gmail.com>
Date:   Fri Sep 19 09:41:54 2025 +0900

    chore: ビルド設定とデプロイスクリプトを更新
    
    プロジェクトのビルドとデプロイメント設定を調整：
    - データベース設定変数を整理（dbType, dbName, dbUserName, dbPassword）
    - command-apiのメインクラスパスを修正
    - Lambdaデプロイスクリプトの改善

diff --git a/build.sbt b/build.sbt
index 802d9f0..682ca81 100644
--- a/build.sbt
+++ b/build.sbt
@@ -3,12 +3,15 @@ import jp.co.septeni_original.sbt.dao.generator.model.ColumnDesc
 
 import scala.sys.process.Process
 
+val dbType = "postgresql"
 val basename = "pcqrses"
 val scala3Version = "3.6.2"
-val databaseName = s"${basename}_development"
+val dbName = s"${basename}_db"
+val dbUserName = "postgres"
+val dbPassword = "postgres"
 val generatorPortNumber = 55432 // DAO生成専用ポート
 lazy val generatorDatabaseUrl =
-  s"jdbc:postgresql://localhost:${generatorPortNumber}/${databaseName}?user=postgres&password=postgres"
+  s"jdbc:$dbType://localhost:$generatorPortNumber/$dbName?user=$dbUserName&password=$dbPassword"
 
 ThisBuild / organization := "io.github.j5ik2o"
 ThisBuild / scalaVersion := scala3Version
@@ -187,7 +190,7 @@ lazy val commandApi = (project in file("apps/command-api"))
   .settings(dockerSettings)
   .settings(
     name := "command-api",
-    Compile / mainClass := Some("io.github.j5ik2o.pcqrses.commandapi.Main"),
+    Compile / mainClass := Some("io.github.j5ik2o.pcqrses.commandApi.MainActor"),
     Docker / packageName := s"${basename}-command-api",
     Docker / version := "0.1.0",
     Docker / dockerExposedPorts := Seq(18080),
@@ -268,8 +271,8 @@ lazy val queryInterfaceAdapter = (project in file("modules/query/interface-adapt
     // DAO生成用のJDBC設定（別ポート）
     generator / driverClassName := "org.postgresql.Driver",
     generator / jdbcUrl := generatorDatabaseUrl,
-    generator / jdbcUser := "postgres",
-    generator / jdbcPassword := "postgres",
+    generator / jdbcUser := dbUserName,
+    generator / jdbcPassword := dbPassword,
     // PostgreSQL起動タスク（DAO生成用）
     TaskKey[Unit]("startPostgresForGenerate") := {
       Process(s"docker rm -f ${generatorDockerName}").!
@@ -279,11 +282,11 @@ lazy val queryInterfaceAdapter = (project in file("modules/query/interface-adapt
         "--name",
         generatorDockerName,
         "-e",
-        s"POSTGRES_USER=postgres",
+        s"POSTGRES_USER=$dbUserName",
         "-e",
-        s"POSTGRES_PASSWORD=postgres",
+        s"POSTGRES_PASSWORD=$dbPassword",
         "-e",
-        s"POSTGRES_DB=$databaseName",
+        s"POSTGRES_DB=$dbName",
         "-p",
         s"${generatorPortNumber}:5432",
         "-d",
@@ -334,7 +337,7 @@ lazy val queryApi = (project in file("apps/query-api"))
   .settings(dockerSettings)
   .settings(
     name := "query-api",
-    Compile / mainClass := Some(s"io.github.j5ik2o.${basename}.queryapi.Main"),
+    Compile / mainClass := Some(s"io.github.j5ik2o.${basename}.queryApi.MainActor"),
     Docker / packageName := s"${basename}-query-api",
     Docker / version := "0.1.0",
     Docker / dockerExposedPorts := Seq(18082),
@@ -350,7 +353,7 @@ lazy val readModelUpdater = (project in file("apps/read-model-updater"))
   .settings(dockerSettings)
   .settings(
     name := "read-model-updater",
-    Compile / mainClass := Some(s"io.github.j5ik2o.${basename}.readmodelupdater.Main"),
+    Compile / mainClass := Some(s"io.github.j5ik2o.${basename}.readModelUpdater.Main"),
     // Docker設定
     Docker / packageName := s"${basename}-read-model-updater",
     Docker / version := "0.1.0",
@@ -361,7 +364,7 @@ lazy val readModelUpdater = (project in file("apps/read-model-updater"))
       "modules/infrastructure/src/main/resources/application.conf") -> "conf/application.conf",
     Universal / javaOptions ++= Seq("-Dconfig.file=conf/application.conf"),
     assembly / assemblyJarName := "read-model-updater-lambda.jar",
-    assembly / mainClass := Some(s"io.github.j5ik2o.${basename}.readmodelupdater.LambdaHandler"),
+    assembly / mainClass := Some(s"io.github.j5ik2o.${basename}.readModelUpdater.LambdaHandler"),
     assembly / assemblyMergeStrategy := {
       case PathList("META-INF", xs @ _*) => MergeStrategy.discard
       case PathList("reference.conf") => MergeStrategy.concat
diff --git a/scripts/deploy-lambda-localstack.sh b/scripts/deploy-lambda-localstack.sh
index bfd617a..c9f32e0 100755
--- a/scripts/deploy-lambda-localstack.sh
+++ b/scripts/deploy-lambda-localstack.sh
@@ -19,6 +19,8 @@ export AWS_DEFAULT_REGION=ap-northeast-1
 export PORT=50503
 export HOST=localhost
 export ENDPOINT_URL=http://${HOST}:${PORT}
+export SCALA_VERSION=3.6.2
+export PROJECT_NAME=read-model-updater
 
 # Lambda関数名
 FUNCTION_NAME="pcqrses-read-model-updater"
@@ -52,7 +54,7 @@ export PAGER=cat
 sbt --batch "project readModelUpdater" assembly
 
 # Assembly JARのパス
-ASSEMBLY_JAR_PATH="apps/read-model-updater/target/scala-3.6.2/read-model-updater-lambda.jar"
+ASSEMBLY_JAR_PATH="apps/${PROJECT_NAME}/target/${SCALA_VERSION}/${PROJECT_NAME}-lambda.jar"
 
 # Assembly JARが存在することを確認
 if [ ! -f "$ASSEMBLY_JAR_PATH" ]; then
@@ -147,7 +149,7 @@ if [ "$FUNCTION_EXISTS" = "true" ]; then
             --endpoint-url $ENDPOINT_URL \
             --function-name $FUNCTION_NAME \
             --runtime java17 \
-            --handler io.github.j5ik2o.pcqrses.readmodelupdater.LambdaHandler \
+            --handler io.github.j5ik2o.pcqrses.readModelUpdater.LambdaHandler \
             --role arn:aws:iam::000000000000:role/lambda-role \
             --zip-file fileb://$ASSEMBLY_JAR_PATH \
             --timeout 300 \
@@ -163,7 +165,7 @@ if [ "$FUNCTION_EXISTS" = "true" ]; then
             --endpoint-url $ENDPOINT_URL \
             --function-name $FUNCTION_NAME \
             --runtime java17 \
-            --handler io.github.j5ik2o.pcqrses.readmodelupdater.LambdaHandler \
+            --handler io.github.j5ik2o.pcqrses.readModelUpdater.LambdaHandler \
             --timeout 300 \
             --memory-size 512 \
             --environment file://$ENV_JSON_FILE
@@ -185,7 +187,7 @@ else
         --endpoint-url $ENDPOINT_URL \
         --function-name $FUNCTION_NAME \
         --runtime java17 \
-        --handler io.github.j5ik2o.pcqrses.readmodelupdater.LambdaHandler \
+        --handler io.github.j5ik2o.pcqrses.readModelUpdater.LambdaHandler \
         --role arn:aws:iam::000000000000:role/lambda-role \
         --zip-file fileb://$ASSEMBLY_JAR_PATH \
         --timeout 300 \
@@ -292,7 +294,7 @@ echo "🧹 デプロイメント完了"
 echo ""
 echo "✅ Lambda関数のデプロイが完了しました!"
 echo "   関数名: $FUNCTION_NAME"
-echo "   ハンドラー: io.github.j5ik2o.pcqrses.readmodelupdater.LambdaHandler"
+echo "   ハンドラー: io.github.j5ik2o.pcqrses.readModelUpdater.LambdaHandler"
 echo "   ストリーム ARN: $STREAM_ARN"
 echo ""
 echo "📋 確認用コマンド:"

```

## コミット: e354645

### メッセージ

```
feat: Query APIの実装とデータベーススキーマを追加
クエリ側のAPI実装とユーザーアカウントテーブルのスキーマ定義。

実装内容:
- Query API MainActor: GraphQLサーバーの基盤実装
- ServerConfig: クエリAPI設定管理
- UserAccounts DAOとその拡張機能
- SlickDaoSupport: DAOの共通機能
- V1マイグレーション: user_accountsテーブル定義
```

### 変更されたファイル

- M	apps/query-api/src/main/scala/io/github/j5ik2o/pcqrses/queryApi/MainActor.scala
- M	apps/query-api/src/main/scala/io/github/j5ik2o/pcqrses/queryApi/config/ServerConfig.scala
- M	modules/query/flyway-migration/src/main/resources/db/migration/V1__create_tables.sql
- M	modules/query/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/dao/SlickDaoSupport.scala
- A	modules/query/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/dao/UserAccounts.scala
- M	modules/query/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/dao/UserAccountsExtensions.scala

### 変更内容

```diff
commit e354645ded0d1b79a652343370a8f9b765b437d4
Author: Junichi Kato <j5ik2o@gmail.com>
Date:   Fri Sep 19 09:41:16 2025 +0900

    feat: Query APIの実装とデータベーススキーマを追加
    
    クエリ側のAPI実装とユーザーアカウントテーブルのスキーマ定義。
    
    実装内容:
    - Query API MainActor: GraphQLサーバーの基盤実装
    - ServerConfig: クエリAPI設定管理
    - UserAccounts DAOとその拡張機能
    - SlickDaoSupport: DAOの共通機能
    - V1マイグレーション: user_accountsテーブル定義

diff --git a/apps/query-api/src/main/scala/io/github/j5ik2o/pcqrses/queryApi/MainActor.scala b/apps/query-api/src/main/scala/io/github/j5ik2o/pcqrses/queryApi/MainActor.scala
index 0099d6f..2638da1 100644
--- a/apps/query-api/src/main/scala/io/github/j5ik2o/pcqrses/queryApi/MainActor.scala
+++ b/apps/query-api/src/main/scala/io/github/j5ik2o/pcqrses/queryApi/MainActor.scala
@@ -1 +1,24 @@
-object MainActor {}
+package io.github.j5ik2o.pcqrses.queryApi
+
+import org.apache.pekko.actor.typed.scaladsl.Behaviors
+import org.apache.pekko.actor.typed.{ActorSystem, Behavior}
+
+import scala.concurrent.duration.Duration
+import scala.concurrent.{Await, ExecutionContextExecutor}
+
+object MainActor extends App {
+  private sealed trait Command
+  private case object Start extends Command
+  private case object Stop extends Command
+
+  private def apply(): Behavior[Command] = Behaviors.setup[Command] { context =>
+    implicit val executionContext: ExecutionContextExecutor = system.executionContext
+    // TODO: GraphQL Handler(Query) の初期化
+    Behaviors.empty
+  }
+
+  private val system: ActorSystem[Command] = ActorSystem(apply(), "query-api-system")
+  system ! Start
+
+  Await.result(system.whenTerminated, Duration.Inf)
+}
diff --git a/apps/query-api/src/main/scala/io/github/j5ik2o/pcqrses/queryApi/config/ServerConfig.scala b/apps/query-api/src/main/scala/io/github/j5ik2o/pcqrses/queryApi/config/ServerConfig.scala
index 938ef7e..25641df 100644
--- a/apps/query-api/src/main/scala/io/github/j5ik2o/pcqrses/queryApi/config/ServerConfig.scala
+++ b/apps/query-api/src/main/scala/io/github/j5ik2o/pcqrses/queryApi/config/ServerConfig.scala
@@ -1,3 +1,18 @@
-package io.github.j5ik2o.pcqrses.queryApi.config class ServerConfig {
+package io.github.j5ik2o.pcqrses.queryApi.config
+import scala.jdk.DurationConverters.*
+final case class ServerConfig(
+  host: String,
+  port: Int,
+  shutdownTimeout: scala.concurrent.duration.FiniteDuration
+)
 
+object ServerConfig {
+  def from(config: com.typesafe.config.Config): ServerConfig = {
+    val queryApiconfig = config.getConfig("pcqrses.query-api")
+    ServerConfig(
+      host = queryApiconfig.getString("host"),
+      port = queryApiconfig.getInt("port"),
+      shutdownTimeout = queryApiconfig.getDuration("shutdown-timeout").toScala
+    )
+  }
 }
diff --git a/modules/query/flyway-migration/src/main/resources/db/migration/V1__create_tables.sql b/modules/query/flyway-migration/src/main/resources/db/migration/V1__create_tables.sql
index e69de29..2ba68c8 100644
--- a/modules/query/flyway-migration/src/main/resources/db/migration/V1__create_tables.sql
+++ b/modules/query/flyway-migration/src/main/resources/db/migration/V1__create_tables.sql
@@ -0,0 +1,8 @@
+create table "user_accounts"
+(
+    "id"            char(26)                  not null primary key,
+    "first_name"    varchar                   not null,
+    "last_name"     varchar                   not null,
+    "created_at"    timestamp with time zone  not null default current_timestamp,
+    "updated_at"    timestamp with time zone  not null default current_timestamp
+);
diff --git a/modules/query/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/dao/SlickDaoSupport.scala b/modules/query/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/dao/SlickDaoSupport.scala
index 8f50f58..296f2c3 100644
--- a/modules/query/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/dao/SlickDaoSupport.scala
+++ b/modules/query/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/dao/SlickDaoSupport.scala
@@ -1,13 +1,25 @@
-package io.github.j5ik2o.pcqrses.driver.dao.slick.support
+package io.github.j5ik2o.pcqrses.query.interfaceAdapter.dao
 
 import slick.jdbc.JdbcProfile
 
 trait SlickDaoSupport {
   val profile: JdbcProfile
-  import profile.api._
-  
-  // Common database operations and utilities
-  def withTransaction[T](action: DBIO[T]): DBIO[T] = {
-    action.transactionally
+  import profile.api.*
+
+  trait Record
+
+  trait SoftDeletableRecord extends Record {
+    val status: String
+  }
+
+  abstract class TableBase[T](
+    _tableTag: profile.api.Tag,
+    _tableName: String,
+    _schemaName: Option[String] = None)
+    extends profile.api.Table[T](_tableTag, _schemaName, _tableName)
+
+  trait SoftDeletableTableSupport[T] {
+    this: TableBase[T] =>
+    def status: profile.api.Rep[String]
   }
-}
\ No newline at end of file
+}
diff --git a/modules/query/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/dao/UserAccounts.scala b/modules/query/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/dao/UserAccounts.scala
new file mode 100644
index 0000000..78180d8
--- /dev/null
+++ b/modules/query/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/dao/UserAccounts.scala
@@ -0,0 +1,35 @@
+package io.github.j5ik2o.pcqrses.query.interfaceAdapter.dao
+// このファイルは自動生成ファイルなので直接編集しないでください。
+import slick.lifted.PrimaryKey
+import slick.lifted.ProvenShape
+
+trait UserAccountsComponent extends SlickDaoSupport with UserAccountsExtensions {
+  import profile.api._
+
+  final case class UserAccountsRecord(
+    id: String,
+    firstName: String,
+    lastName: String,
+    createdAt: java.sql.Timestamp,
+    updatedAt: java.sql.Timestamp
+  ) extends Record
+
+  final case class UserAccounts(tag: Tag)
+    extends TableBase[UserAccountsRecord](tag, "user_accounts") {
+    def id: Rep[String] = column[String]("id")
+    def firstName: Rep[String] = column[String]("first_name")
+    def lastName: Rep[String] = column[String]("last_name")
+    def createdAt: Rep[java.sql.Timestamp] = column[java.sql.Timestamp]("created_at")
+    def updatedAt: Rep[java.sql.Timestamp] = column[java.sql.Timestamp]("updated_at")
+
+    def pk: PrimaryKey = primaryKey("pk", id)
+
+    override def * : ProvenShape[UserAccountsRecord] =
+      (id, firstName, lastName, createdAt, updatedAt) <> (
+        UserAccountsRecord.apply,
+        UserAccountsRecord.unapply)
+  }
+
+  object UserAccountsDao extends TableQuery(UserAccounts.apply) with UserAccountsDaoExtensions
+
+}
diff --git a/modules/query/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/dao/UserAccountsExtensions.scala b/modules/query/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/dao/UserAccountsExtensions.scala
index 3a50e36..a70888a 100644
--- a/modules/query/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/dao/UserAccountsExtensions.scala
+++ b/modules/query/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/dao/UserAccountsExtensions.scala
@@ -1,5 +1,12 @@
 package io.github.j5ik2o.pcqrses.query.interfaceAdapter.dao
 
 trait UserAccountsExtensions {
-
+  this: UserAccountsComponent =>
+  trait UserAccountsDaoExtensions { dao: UserAccountsDao.type =>
+    import profile.api._
+    def findAll(): DBIO[Seq[UserAccountsRecord]] =
+      dao.result
+    def findByIds(ids: Seq[String]): DBIO[Seq[UserAccountsRecord]] =
+      dao.filter(_.id inSet ids).result
+  }
 }

```

## コミット: cba42a7

### メッセージ

```
refactor: Command APIのアクセス修飾子とフォーマット調整
コマンドAPIのMainActorを改善：
- Commandトレイトと関連ケースオブジェクトをprivateに変更
- import文の順序を整理
- インデントとフォーマットを調整
- ServerConfig.fromメソッドの設定パスを修正
```

### 変更されたファイル

- M	apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/MainActor.scala
- M	apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/config/LoadBalancerConfig.scala
- M	apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/config/ServerConfig.scala

### 変更内容

```diff
commit cba42a77dfcf776bf75bf07a8e62c33f43fe4287
Author: Junichi Kato <j5ik2o@gmail.com>
Date:   Fri Sep 19 09:40:53 2025 +0900

    refactor: Command APIのアクセス修飾子とフォーマット調整
    
    コマンドAPIのMainActorを改善：
    - Commandトレイトと関連ケースオブジェクトをprivateに変更
    - import文の順序を整理
    - インデントとフォーマットを調整
    - ServerConfig.fromメソッドの設定パスを修正

diff --git a/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/MainActor.scala b/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/MainActor.scala
index 1b22dd7..0c95c04 100644
--- a/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/MainActor.scala
+++ b/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/MainActor.scala
@@ -1,10 +1,10 @@
 package io.github.j5ik2o.pcqrses.commandApi
 
 import io.github.j5ik2o.pcqrses.commandApi.config.{LoadBalancerConfig, ServerConfig}
-import org.apache.pekko.{Done, pattern}
+import org.apache.pekko.{pattern, Done}
 import org.apache.pekko.actor.CoordinatedShutdown
 import org.apache.pekko.actor.typed.scaladsl.Behaviors
-import org.apache.pekko.actor.typed.{ActorSystem, Behavior, Scheduler, scaladsl}
+import org.apache.pekko.actor.typed.{scaladsl, ActorSystem, Behavior, Scheduler}
 import org.apache.pekko.cluster.typed.Cluster
 import org.apache.pekko.http.scaladsl.Http
 import org.apache.pekko.management.cluster.bootstrap.ClusterBootstrap
@@ -16,22 +16,23 @@ import scala.concurrent.duration.*
 import scala.concurrent.{Await, ExecutionContextExecutor, Future}
 import scala.concurrent.duration.Duration
 import zio.*
+
 object MainActor extends App {
-  sealed trait Command
-  case object Start extends Command
-  case object Stop extends Command
+  private sealed trait Command
+  private case object Start extends Command
+  private case object Stop extends Command
   private case class ServerStarted(binding: Http.ServerBinding, startTime: Long) extends Command
   private case class ServerFailed(ex: Throwable, startTime: Long) extends Command
 
   private def startManagementWithGracefulShutdown(
-                                                   context: scaladsl.ActorContext[Command],
-                                                   management: PekkoManagement,
-                                                   coordinatedShutdown: CoordinatedShutdown,
-                                                   lbConfig: LoadBalancerConfig
-                                                 )(implicit
-                                                   executionContext: ExecutionContextExecutor,
-                                                   system: ActorSystem[?]
-                                                 ): Unit = {
+    context: scaladsl.ActorContext[Command],
+    management: PekkoManagement,
+    coordinatedShutdown: CoordinatedShutdown,
+    lbConfig: LoadBalancerConfig
+  )(implicit
+    executionContext: ExecutionContextExecutor,
+    system: ActorSystem[?]
+  ): Unit = {
     val managementFuture = management.start().map { uri =>
       context.log.info(s"Pekko Management started on $uri")
 
@@ -66,6 +67,7 @@ object MainActor extends App {
         context.log.error(s"Failed to start Pekko Management: ${ex.getMessage}")
     }
   }
+
   private def initializeCluster(context: scaladsl.ActorContext[Command]): Unit = {
     implicit val system: ActorSystem[Nothing] = context.system
     implicit val executionContext: ExecutionContextExecutor = system.executionContext
@@ -82,13 +84,14 @@ object MainActor extends App {
     startManagementWithGracefulShutdown(context, management, coordinatedShutdown, lbConfig)
 
     if (system.settings.config.hasPath(
-      "pekko.management.cluster.bootstrap.contact-point-discovery.discovery-method")) {
+        "pekko.management.cluster.bootstrap.contact-point-discovery.discovery-method")) {
       ClusterBootstrap(system).start()
       context.log.info("Cluster Bootstrap started")
     }
   }
-  def apply(): Behavior[Command] = {
-    Behaviors.setup{ context =>
+
+  private def apply(): Behavior[Command] =
+    Behaviors.setup { context =>
       implicit val system: ActorSystem[Nothing] = context.system
       implicit val materializer: Materializer = Materializer(system)
       implicit val executionContext: ExecutionContextExecutor = system.executionContext
@@ -112,9 +115,8 @@ object MainActor extends App {
 
       Behaviors.same
     }
-  }
 
-  val system = ActorSystem(apply(), "command-api-system")
+  private val system: ActorSystem[Command] = ActorSystem(apply(), "command-api-system")
   system ! Start
 
   Await.result(system.whenTerminated, Duration.Inf)
diff --git a/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/config/LoadBalancerConfig.scala b/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/config/LoadBalancerConfig.scala
index 8f80fe9..d6d57ad 100644
--- a/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/config/LoadBalancerConfig.scala
+++ b/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/config/LoadBalancerConfig.scala
@@ -5,9 +5,9 @@ import com.typesafe.config.Config
 import scala.jdk.DurationConverters.*
 
 final case class LoadBalancerConfig(
-                                     detachWaitDuration: scala.concurrent.duration.FiniteDuration,
-                                     healthCheckGracePeriod: scala.concurrent.duration.FiniteDuration
-                                   )
+  detachWaitDuration: scala.concurrent.duration.FiniteDuration,
+  healthCheckGracePeriod: scala.concurrent.duration.FiniteDuration
+)
 
 object LoadBalancerConfig {
   def from(config: Config): LoadBalancerConfig =
diff --git a/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/config/ServerConfig.scala b/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/config/ServerConfig.scala
index 18296a5..bf31952 100644
--- a/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/config/ServerConfig.scala
+++ b/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/config/ServerConfig.scala
@@ -4,20 +4,21 @@ import com.typesafe.config.Config
 
 import scala.jdk.DurationConverters.*
 
-// 設定値を保持するケースクラス
 final case class ServerConfig(
-                               host: String,
-                               port: Int,
-                               actorTimeout: scala.concurrent.duration.FiniteDuration,
-                               shutdownTimeout: scala.concurrent.duration.FiniteDuration
-                             )
+  host: String,
+  port: Int,
+  actorTimeout: scala.concurrent.duration.FiniteDuration,
+  shutdownTimeout: scala.concurrent.duration.FiniteDuration
+)
 
 object ServerConfig {
-  def from(config: Config): ServerConfig =
+  def from(config: Config): ServerConfig = {
+    val commandApiconfig = config.getConfig("pcqrses.command-api")
     ServerConfig(
-      host = config.getString("server.host"),
-      port = config.getInt("server.port"),
-      actorTimeout = config.getDuration("actor-timeout").toScala,
-      shutdownTimeout = config.getDuration("server.shutdown-timeout").toScala
+      host = commandApiconfig.getString("host"),
+      port = commandApiconfig.getInt("port"),
+      actorTimeout = commandApiconfig.getDuration("actor-timeout").toScala,
+      shutdownTimeout = commandApiconfig.getDuration("shutdown-timeout").toScala
     )
+  }
 }

```

## コミット: 4480c62

### メッセージ

```
feat: Query API基盤とDAOサポートの構造を追加
クエリ側のAPI基盤とデータアクセスレイヤーの基本構造を構築。

追加内容:
- Query API MainActorをパッケージ構造に移動
- ServerConfig: クエリAPI用のサーバー設定
- SlickDaoSupport: DAOの基底トレイトを適切な場所へ移動
- UserAccountsExtensions: ユーザーアカウントDAO拡張の基盤
```

### 変更されたファイル

- D	apps/query-api/src/main/scala/MainActor.scala
- A	apps/query-api/src/main/scala/io/github/j5ik2o/pcqrses/queryApi/MainActor.scala
- A	apps/query-api/src/main/scala/io/github/j5ik2o/pcqrses/queryApi/config/ServerConfig.scala
- A	modules/query/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/dao/UserAccountsExtensions.scala

### 変更内容

```diff
commit 4480c62381170967042fd4bb3e41a4798f00028e
Author: Junichi Kato <j5ik2o@gmail.com>
Date:   Fri Sep 19 09:40:25 2025 +0900

    feat: Query API基盤とDAOサポートの構造を追加
    
    クエリ側のAPI基盤とデータアクセスレイヤーの基本構造を構築。
    
    追加内容:
    - Query API MainActorをパッケージ構造に移動
    - ServerConfig: クエリAPI用のサーバー設定
    - SlickDaoSupport: DAOの基底トレイトを適切な場所へ移動
    - UserAccountsExtensions: ユーザーアカウントDAO拡張の基盤

diff --git a/apps/query-api/src/main/scala/MainActor.scala b/apps/query-api/src/main/scala/MainActor.scala
deleted file mode 100644
index cd5361d..0000000
--- a/apps/query-api/src/main/scala/MainActor.scala
+++ /dev/null
@@ -1,3 +0,0 @@
-object MainActor {
-
-}
diff --git a/apps/query-api/src/main/scala/io/github/j5ik2o/pcqrses/queryApi/MainActor.scala b/apps/query-api/src/main/scala/io/github/j5ik2o/pcqrses/queryApi/MainActor.scala
new file mode 100644
index 0000000..0099d6f
--- /dev/null
+++ b/apps/query-api/src/main/scala/io/github/j5ik2o/pcqrses/queryApi/MainActor.scala
@@ -0,0 +1 @@
+object MainActor {}
diff --git a/apps/query-api/src/main/scala/io/github/j5ik2o/pcqrses/queryApi/config/ServerConfig.scala b/apps/query-api/src/main/scala/io/github/j5ik2o/pcqrses/queryApi/config/ServerConfig.scala
new file mode 100644
index 0000000..938ef7e
--- /dev/null
+++ b/apps/query-api/src/main/scala/io/github/j5ik2o/pcqrses/queryApi/config/ServerConfig.scala
@@ -0,0 +1,3 @@
+package io.github.j5ik2o.pcqrses.queryApi.config class ServerConfig {
+
+}
diff --git a/modules/query/driver/src/main/scala/io/github/j5ik2o/pcqrses/driver/dao/slick/support/SlickDaoSupport.scala b/modules/query/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/dao/SlickDaoSupport.scala
similarity index 100%
rename from modules/query/driver/src/main/scala/io/github/j5ik2o/pcqrses/driver/dao/slick/support/SlickDaoSupport.scala
rename to modules/query/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/dao/SlickDaoSupport.scala
diff --git a/modules/query/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/dao/UserAccountsExtensions.scala b/modules/query/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/dao/UserAccountsExtensions.scala
new file mode 100644
index 0000000..3a50e36
--- /dev/null
+++ b/modules/query/interface-adapter/src/main/scala/io/github/j5ik2o/pcqrses/query/interfaceAdapter/dao/UserAccountsExtensions.scala
@@ -0,0 +1,5 @@
+package io.github.j5ik2o.pcqrses.query.interfaceAdapter.dao
+
+trait UserAccountsExtensions {
+
+}

```

## コミット: 7c6aebe

### メッセージ

```
feat: Command APIサーバーの実装を追加
Pekko HTTPとクラスター機能を含むCommand APIサーバーの実装。

実装内容:
- MainActor: クラスター初期化、管理エンドポイント、グレースフルシャットダウン
- LoadBalancerConfig: デタッチ待機時間とヘルスチェック設定
- ServerConfig: ホスト、ポート、タイムアウト設定
- Pekko Management統合によるクラスターブートストラップ
- CoordinatedShutdownによる安全な終了処理
```

### 変更されたファイル

- M	apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/MainActor.scala
- M	apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/config/LoadBalancerConfig.scala
- M	apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/config/ServerConfig.scala

### 変更内容

```diff
commit 7c6aebe0683e8c52c818391832521ff54f5c44b8
Author: Junichi Kato <j5ik2o@gmail.com>
Date:   Fri Sep 19 02:48:08 2025 +0900

    feat: Command APIサーバーの実装を追加
    
    Pekko HTTPとクラスター機能を含むCommand APIサーバーの実装。
    
    実装内容:
    - MainActor: クラスター初期化、管理エンドポイント、グレースフルシャットダウン
    - LoadBalancerConfig: デタッチ待機時間とヘルスチェック設定
    - ServerConfig: ホスト、ポート、タイムアウト設定
    - Pekko Management統合によるクラスターブートストラップ
    - CoordinatedShutdownによる安全な終了処理

diff --git a/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/MainActor.scala b/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/MainActor.scala
index 72e95f1..1b22dd7 100644
--- a/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/MainActor.scala
+++ b/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/MainActor.scala
@@ -1,5 +1,121 @@
 package io.github.j5ik2o.pcqrses.commandApi
 
-object MainActor {
+import io.github.j5ik2o.pcqrses.commandApi.config.{LoadBalancerConfig, ServerConfig}
+import org.apache.pekko.{Done, pattern}
+import org.apache.pekko.actor.CoordinatedShutdown
+import org.apache.pekko.actor.typed.scaladsl.Behaviors
+import org.apache.pekko.actor.typed.{ActorSystem, Behavior, Scheduler, scaladsl}
+import org.apache.pekko.cluster.typed.Cluster
+import org.apache.pekko.http.scaladsl.Http
+import org.apache.pekko.management.cluster.bootstrap.ClusterBootstrap
+import org.apache.pekko.management.scaladsl.PekkoManagement
+import org.apache.pekko.stream.Materializer
+import org.apache.pekko.util.Timeout
 
+import scala.concurrent.duration.*
+import scala.concurrent.{Await, ExecutionContextExecutor, Future}
+import scala.concurrent.duration.Duration
+import zio.*
+object MainActor extends App {
+  sealed trait Command
+  case object Start extends Command
+  case object Stop extends Command
+  private case class ServerStarted(binding: Http.ServerBinding, startTime: Long) extends Command
+  private case class ServerFailed(ex: Throwable, startTime: Long) extends Command
+
+  private def startManagementWithGracefulShutdown(
+                                                   context: scaladsl.ActorContext[Command],
+                                                   management: PekkoManagement,
+                                                   coordinatedShutdown: CoordinatedShutdown,
+                                                   lbConfig: LoadBalancerConfig
+                                                 )(implicit
+                                                   executionContext: ExecutionContextExecutor,
+                                                   system: ActorSystem[?]
+                                                 ): Unit = {
+    val managementFuture = management.start().map { uri =>
+      context.log.info(s"Pekko Management started on $uri")
+
+      coordinatedShutdown.addTask(
+        CoordinatedShutdown.PhaseBeforeServiceUnbind,
+        "management-loadbalancer-detach") { () =>
+        for {
+          _ <- Future {
+            context.log.info(
+              s"Starting graceful shutdown - waiting ${lbConfig.detachWaitDuration} for LoadBalancer detach")
+          }
+          _ <- pattern.after(lbConfig.detachWaitDuration) {
+            Future {
+              context.log.info("LoadBalancer detach wait completed")
+            }
+          }
+          _ <- management.stop()
+          _ <- Future {
+            context.log.info("Pekko Management terminated")
+          }
+        } yield Done
+      }
+      Done
+    }
+
+    try
+      Await.result(managementFuture, 10.seconds)
+    catch {
+      case ex: java.util.concurrent.TimeoutException =>
+        context.log.error(s"Pekko Management start timed out: ${ex.getMessage}")
+      case ex: Throwable =>
+        context.log.error(s"Failed to start Pekko Management: ${ex.getMessage}")
+    }
+  }
+  private def initializeCluster(context: scaladsl.ActorContext[Command]): Unit = {
+    implicit val system: ActorSystem[Nothing] = context.system
+    implicit val executionContext: ExecutionContextExecutor = system.executionContext
+
+    val cluster = Cluster(system)
+    context.log.info(s"Initializing cluster node: ${cluster.selfMember.address}")
+
+    val management = PekkoManagement(system)
+    val coordinatedShutdown = CoordinatedShutdown(system)
+    val config = system.settings.config
+
+    val lbConfig = LoadBalancerConfig.from(config.getConfig("command-api"))
+
+    startManagementWithGracefulShutdown(context, management, coordinatedShutdown, lbConfig)
+
+    if (system.settings.config.hasPath(
+      "pekko.management.cluster.bootstrap.contact-point-discovery.discovery-method")) {
+      ClusterBootstrap(system).start()
+      context.log.info("Cluster Bootstrap started")
+    }
+  }
+  def apply(): Behavior[Command] = {
+    Behaviors.setup{ context =>
+      implicit val system: ActorSystem[Nothing] = context.system
+      implicit val materializer: Materializer = Materializer(system)
+      implicit val executionContext: ExecutionContextExecutor = system.executionContext
+      implicit val scheduler: Scheduler = system.scheduler
+      implicit val zioRuntime: Runtime[Any] = Runtime.default
+
+      val serverConfig = ServerConfig.from(system.settings.config.getConfig("command-api"))
+      val isClusterEnabled = system.settings.config.hasPath("pekko.cluster.enabled") &&
+        system.settings.config.getBoolean("pekko.cluster.enabled")
+
+      implicit val timeout: Timeout = Timeout(serverConfig.actorTimeout)
+
+      context.log.info(
+        s"Command API server initializing... (timeout: ${serverConfig.actorTimeout}, host: ${serverConfig.host}:${serverConfig.port}, cluster: $isClusterEnabled)")
+
+      if (isClusterEnabled) {
+        initializeCluster(context)
+      }
+
+      // TODO: GraphQL Handler(Mutation) の初期化
+
+      Behaviors.same
+    }
+  }
+
+  val system = ActorSystem(apply(), "command-api-system")
+  system ! Start
+
+  Await.result(system.whenTerminated, Duration.Inf)
 }
diff --git a/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/config/LoadBalancerConfig.scala b/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/config/LoadBalancerConfig.scala
index 751a6e9..8f80fe9 100644
--- a/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/config/LoadBalancerConfig.scala
+++ b/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/config/LoadBalancerConfig.scala
@@ -1,3 +1,18 @@
-package io.github.j5ik2o.pcqrses.commandApi.config class LoadBalancerConfig {
+package io.github.j5ik2o.pcqrses.commandApi.config
 
+import com.typesafe.config.Config
+
+import scala.jdk.DurationConverters.*
+
+final case class LoadBalancerConfig(
+                                     detachWaitDuration: scala.concurrent.duration.FiniteDuration,
+                                     healthCheckGracePeriod: scala.concurrent.duration.FiniteDuration
+                                   )
+
+object LoadBalancerConfig {
+  def from(config: Config): LoadBalancerConfig =
+    LoadBalancerConfig(
+      detachWaitDuration = config.getDuration("detach-wait-duration").toScala,
+      healthCheckGracePeriod = config.getDuration("health-check-grace-period").toScala
+    )
 }
diff --git a/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/config/ServerConfig.scala b/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/config/ServerConfig.scala
index 91c2976..18296a5 100644
--- a/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/config/ServerConfig.scala
+++ b/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/config/ServerConfig.scala
@@ -1,3 +1,23 @@
-package io.github.j5ik2o.pcqrses.commandApi.config class ServerConfig {
+package io.github.j5ik2o.pcqrses.commandApi.config
 
+import com.typesafe.config.Config
+
+import scala.jdk.DurationConverters.*
+
+// 設定値を保持するケースクラス
+final case class ServerConfig(
+                               host: String,
+                               port: Int,
+                               actorTimeout: scala.concurrent.duration.FiniteDuration,
+                               shutdownTimeout: scala.concurrent.duration.FiniteDuration
+                             )
+
+object ServerConfig {
+  def from(config: Config): ServerConfig =
+    ServerConfig(
+      host = config.getString("server.host"),
+      port = config.getInt("server.port"),
+      actorTimeout = config.getDuration("actor-timeout").toScala,
+      shutdownTimeout = config.getDuration("server.shutdown-timeout").toScala
+    )
 }

```

## コミット: 1ab03fa

### メッセージ

```
feat: Command APIとQuery APIのメインアクター基盤を追加
コマンド側とクエリ側のAPIサーバー基盤となる構造を追加。

追加内容:
- MainActor: Command APIのエントリーポイント
- LoadBalancerConfig: ロードバランサー設定用ケースクラス
- ServerConfig: サーバー設定用ケースクラス
- Query API用のMainActorプレースホルダー
- Flywayマイグレーション用の初期SQLファイル
```

### 変更されたファイル

- A	apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/MainActor.scala
- A	apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/config/LoadBalancerConfig.scala
- A	apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/config/ServerConfig.scala
- A	apps/query-api/src/main/scala/MainActor.scala
- A	modules/query/flyway-migration/src/main/resources/db/migration/V1__create_tables.sql

### 変更内容

```diff
commit 1ab03fa200ee54b195ad7038edc7f25690fc6646
Author: Junichi Kato <j5ik2o@gmail.com>
Date:   Fri Sep 19 02:47:42 2025 +0900

    feat: Command APIとQuery APIのメインアクター基盤を追加
    
    コマンド側とクエリ側のAPIサーバー基盤となる構造を追加。
    
    追加内容:
    - MainActor: Command APIのエントリーポイント
    - LoadBalancerConfig: ロードバランサー設定用ケースクラス
    - ServerConfig: サーバー設定用ケースクラス
    - Query API用のMainActorプレースホルダー
    - Flywayマイグレーション用の初期SQLファイル

diff --git a/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/MainActor.scala b/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/MainActor.scala
new file mode 100644
index 0000000..72e95f1
--- /dev/null
+++ b/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/MainActor.scala
@@ -0,0 +1,5 @@
+package io.github.j5ik2o.pcqrses.commandApi
+
+object MainActor {
+
+}
diff --git a/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/config/LoadBalancerConfig.scala b/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/config/LoadBalancerConfig.scala
new file mode 100644
index 0000000..751a6e9
--- /dev/null
+++ b/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/config/LoadBalancerConfig.scala
@@ -0,0 +1,3 @@
+package io.github.j5ik2o.pcqrses.commandApi.config class LoadBalancerConfig {
+
+}
diff --git a/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/config/ServerConfig.scala b/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/config/ServerConfig.scala
new file mode 100644
index 0000000..91c2976
--- /dev/null
+++ b/apps/command-api/src/main/scala/io/github/j5ik2o/pcqrses/commandApi/config/ServerConfig.scala
@@ -0,0 +1,3 @@
+package io.github.j5ik2o.pcqrses.commandApi.config class ServerConfig {
+
+}
diff --git a/apps/query-api/src/main/scala/MainActor.scala b/apps/query-api/src/main/scala/MainActor.scala
new file mode 100644
index 0000000..cd5361d
--- /dev/null
+++ b/apps/query-api/src/main/scala/MainActor.scala
@@ -0,0 +1,3 @@
+object MainActor {
+
+}
diff --git a/modules/query/flyway-migration/src/main/resources/db/migration/V1__create_tables.sql b/modules/query/flyway-migration/src/main/resources/db/migration/V1__create_tables.sql
new file mode 100644
index 0000000..e69de29

```

## コミット: 05fa7af

### メッセージ

```
style: コードフォーマットの調整
コードスタイルの一貫性を保つための調整:
- UserAccountUseCase: ロギング呼び出しの改行を調整
- ActorSpec: コンストラクタ定義から不要な中括弧を削除
```

### 変更されたファイル

- M	modules/command/interface-adapter/src/test/scala/io/github/j5ik2o/pcqrses/command/interfaceAdapter/test/ActorSpec.scala
- M	modules/command/use-case/src/main/scala/io/github/j5ik2o/pcqrses/command/useCase/users/UserAccountUseCase.scala

### 変更内容

```diff
commit 05fa7af67ad202c08371f09699518dd1c11fe254
Author: Junichi Kato <j5ik2o@gmail.com>
Date:   Fri Sep 19 01:53:14 2025 +0900

    style: コードフォーマットの調整
    
    コードスタイルの一貫性を保つための調整:
    - UserAccountUseCase: ロギング呼び出しの改行を調整
    - ActorSpec: コンストラクタ定義から不要な中括弧を削除

diff --git a/modules/command/interface-adapter/src/test/scala/io/github/j5ik2o/pcqrses/command/interfaceAdapter/test/ActorSpec.scala b/modules/command/interface-adapter/src/test/scala/io/github/j5ik2o/pcqrses/command/interfaceAdapter/test/ActorSpec.scala
index 2da602a..cfd82d1 100644
--- a/modules/command/interface-adapter/src/test/scala/io/github/j5ik2o/pcqrses/command/interfaceAdapter/test/ActorSpec.scala
+++ b/modules/command/interface-adapter/src/test/scala/io/github/j5ik2o/pcqrses/command/interfaceAdapter/test/ActorSpec.scala
@@ -37,20 +37,18 @@ abstract class ActorSpec(testKit: ActorTestKit)
 
   def this() = this(ActorTestKit(ActorTestKitBase.testNameFromCallStack()))
 
-  def this(config: String) = {
+  def this(config: String) =
     this(
       ActorTestKit(
         ActorTestKitBase.testNameFromCallStack(),
         ConfigFactory.parseString(config)
       )
     )
-  }
 
-  def this(config: Config) = {
+  def this(config: Config) =
     this(ActorTestKit(ActorTestKitBase.testNameFromCallStack(), config))
-  }
 
-  def this(config: Config, settings: TestKitSettings) = {
+  def this(config: Config, settings: TestKitSettings) =
     this(
       ActorTestKit(
         ActorTestKitBase.testNameFromCallStack(),
@@ -58,7 +56,6 @@ abstract class ActorSpec(testKit: ActorTestKit)
         settings
       )
     )
-  }
 
   implicit def classicSystem: ActorSystem = system.toClassic
 
diff --git a/modules/command/use-case/src/main/scala/io/github/j5ik2o/pcqrses/command/useCase/users/UserAccountUseCase.scala b/modules/command/use-case/src/main/scala/io/github/j5ik2o/pcqrses/command/useCase/users/UserAccountUseCase.scala
index 7ab125a..4628bd3 100644
--- a/modules/command/use-case/src/main/scala/io/github/j5ik2o/pcqrses/command/useCase/users/UserAccountUseCase.scala
+++ b/modules/command/use-case/src/main/scala/io/github/j5ik2o/pcqrses/command/useCase/users/UserAccountUseCase.scala
@@ -21,7 +21,8 @@ class UserAccountUseCase(userAccountAggregateRef: ActorRef[UserAccountProtocol.C
     userAccountName: UserAccountName,
     emailAddress: EmailAddress): IO[UserAccountUseCaseError, UserAccountId] =
     for {
-      _ <- ZIO.succeed(logger.info(s"Creating UserAccount with userAccountName: ${userAccountName.asString}"))
+      _ <- ZIO.succeed(
+        logger.info(s"Creating UserAccount with userAccountName: ${userAccountName.asString}"))
       userAccountId <- ZIO.succeed(UserAccountId.generate())
       reply <- askActor[UserAccountProtocol.CreateReply] { replyTo =>
         UserAccountProtocol.Create(

```

## コミット: 80243f2

### メッセージ

```
style: ActorSpecのコンストラクタに中括弧を追加
スタイルの一貫性を保つため、複数行にわたるコンストラクタ定義に
中括弧を追加。
```

### 変更されたファイル

- M	modules/command/interface-adapter/src/test/scala/io/github/j5ik2o/pcqrses/command/interfaceAdapter/test/ActorSpec.scala

### 変更内容

```diff
commit 80243f2d54e18817066ce161c97ff6219e82baa3
Author: Junichi Kato <j5ik2o@gmail.com>
Date:   Fri Sep 19 01:51:20 2025 +0900

    style: ActorSpecのコンストラクタに中括弧を追加
    
    スタイルの一貫性を保つため、複数行にわたるコンストラクタ定義に
    中括弧を追加。

diff --git a/modules/command/interface-adapter/src/test/scala/io/github/j5ik2o/pcqrses/command/interfaceAdapter/test/ActorSpec.scala b/modules/command/interface-adapter/src/test/scala/io/github/j5ik2o/pcqrses/command/interfaceAdapter/test/ActorSpec.scala
index cfd82d1..2da602a 100644
--- a/modules/command/interface-adapter/src/test/scala/io/github/j5ik2o/pcqrses/command/interfaceAdapter/test/ActorSpec.scala
+++ b/modules/command/interface-adapter/src/test/scala/io/github/j5ik2o/pcqrses/command/interfaceAdapter/test/ActorSpec.scala
@@ -37,18 +37,20 @@ abstract class ActorSpec(testKit: ActorTestKit)
 
   def this() = this(ActorTestKit(ActorTestKitBase.testNameFromCallStack()))
 
-  def this(config: String) =
+  def this(config: String) = {
     this(
       ActorTestKit(
         ActorTestKitBase.testNameFromCallStack(),
         ConfigFactory.parseString(config)
       )
     )
+  }
 
-  def this(config: Config) =
+  def this(config: Config) = {
     this(ActorTestKit(ActorTestKitBase.testNameFromCallStack(), config))
+  }
 
-  def this(config: Config, settings: TestKitSettings) =
+  def this(config: Config, settings: TestKitSettings) = {
     this(
       ActorTestKit(
         ActorTestKitBase.testNameFromCallStack(),
@@ -56,6 +58,7 @@ abstract class ActorSpec(testKit: ActorTestKit)
         settings
       )
     )
+  }
 
   implicit def classicSystem: ActorSystem = system.toClassic
 

```

## コミット: e20245e

### メッセージ

```
feat: ユースケース層の実装とPekko/ZIO相互運用機能を追加
UserAccountUseCaseの完全な実装とPekkoアクターとZIOを繋ぐ
相互運用ユーティリティを実装。

実装内容:
- UserAccountUseCase.createUserAccount: ユーザーアカウント作成機能
- PekkoInterop: Future/ZIO変換、タイムアウト処理、並行実行サポート
- UseCaseError.messageプロパティを追加
- UserAccountUseCaseErrorに具体的なエラーケースを定義
```

### 変更されたファイル

- M	modules/command/use-case/src/main/scala/io/github/j5ik2o/pcqrses/command/useCase/users/UseCaseError.scala
- M	modules/command/use-case/src/main/scala/io/github/j5ik2o/pcqrses/command/useCase/users/UserAccountUseCase.scala
- M	modules/command/use-case/src/main/scala/io/github/j5ik2o/pcqrses/command/useCase/users/UserAccountUseCaseError.scala
- M	modules/infrastructure/src/main/scala/io/github/j5ik2o/pcqrses/infrastructure/effect/PekkoInterop.scala

### 変更内容

```diff
commit e20245e91edb6561a11d9cdcf63cdf7446675874
Author: Junichi Kato <j5ik2o@gmail.com>
Date:   Fri Sep 19 01:50:59 2025 +0900

    feat: ユースケース層の実装とPekko/ZIO相互運用機能を追加
    
    UserAccountUseCaseの完全な実装とPekkoアクターとZIOを繋ぐ
    相互運用ユーティリティを実装。
    
    実装内容:
    - UserAccountUseCase.createUserAccount: ユーザーアカウント作成機能
    - PekkoInterop: Future/ZIO変換、タイムアウト処理、並行実行サポート
    - UseCaseError.messageプロパティを追加
    - UserAccountUseCaseErrorに具体的なエラーケースを定義

diff --git a/modules/command/use-case/src/main/scala/io/github/j5ik2o/pcqrses/command/useCase/users/UseCaseError.scala b/modules/command/use-case/src/main/scala/io/github/j5ik2o/pcqrses/command/useCase/users/UseCaseError.scala
index 86e16bf..96e9436 100644
--- a/modules/command/use-case/src/main/scala/io/github/j5ik2o/pcqrses/command/useCase/users/UseCaseError.scala
+++ b/modules/command/use-case/src/main/scala/io/github/j5ik2o/pcqrses/command/useCase/users/UseCaseError.scala
@@ -1,5 +1,5 @@
 package io.github.j5ik2o.pcqrses.command.useCase.users
 
 trait UseCaseError {
-
+  def message: String
 }
diff --git a/modules/command/use-case/src/main/scala/io/github/j5ik2o/pcqrses/command/useCase/users/UserAccountUseCase.scala b/modules/command/use-case/src/main/scala/io/github/j5ik2o/pcqrses/command/useCase/users/UserAccountUseCase.scala
index ae918ab..7ab125a 100644
--- a/modules/command/use-case/src/main/scala/io/github/j5ik2o/pcqrses/command/useCase/users/UserAccountUseCase.scala
+++ b/modules/command/use-case/src/main/scala/io/github/j5ik2o/pcqrses/command/useCase/users/UserAccountUseCase.scala
@@ -1,3 +1,50 @@
-package io.github.j5ik2o.pcqrses.command.useCase.users class UserAccountUseCase {
+package io.github.j5ik2o.pcqrses.command.useCase.users
 
+import io.github.j5ik2o.pcqrses.command.domain.users.{EmailAddress, UserAccountId, UserAccountName}
+import io.github.j5ik2o.pcqrses.command.interfaceAdapter.contract.users.UserAccountProtocol
+import io.github.j5ik2o.pcqrses.infrastructure.effect.PekkoInterop
+import org.apache.pekko.actor.typed.scaladsl.AskPattern.*
+import org.apache.pekko.actor.typed.{ActorRef, Scheduler}
+import org.apache.pekko.util.Timeout
+import org.slf4j.LoggerFactory
+import zio.{IO, Task, ZIO}
+
+import scala.concurrent.ExecutionContext
+
+class UserAccountUseCase(userAccountAggregateRef: ActorRef[UserAccountProtocol.Command])(implicit
+  timeout: Timeout,
+  scheduler: Scheduler,
+  ec: ExecutionContext) {
+  private val logger = LoggerFactory.getLogger(this.getClass)
+
+  def createUserAccount(
+    userAccountName: UserAccountName,
+    emailAddress: EmailAddress): IO[UserAccountUseCaseError, UserAccountId] =
+    for {
+      _ <- ZIO.succeed(logger.info(s"Creating UserAccount with userAccountName: ${userAccountName.asString}"))
+      userAccountId <- ZIO.succeed(UserAccountId.generate())
+      reply <- askActor[UserAccountProtocol.CreateReply] { replyTo =>
+        UserAccountProtocol.Create(
+          id = userAccountId,
+          name = userAccountName,
+          emailAddress = emailAddress,
+          replyTo = replyTo
+        )
+      }.mapError(e =>
+        UserAccountUseCaseError.UnexpectedError(
+          s"Failed to communicate with actor: ${e.getMessage}",
+          Some(e)))
+      result <- reply match {
+        case UserAccountProtocol.CreateSucceeded(id) =>
+          ZIO.succeed(logger.info(s"UserAccount creation succeeded for ID: ${id.asString}")) *>
+            ZIO.succeed(id)
+      }
+    } yield result
+
+  private def askActor[R](
+    createMessage: ActorRef[R] => UserAccountProtocol.Command
+  ): Task[R] =
+    PekkoInterop.fromFuture {
+      userAccountAggregateRef.ask(createMessage)
+    }
 }
diff --git a/modules/command/use-case/src/main/scala/io/github/j5ik2o/pcqrses/command/useCase/users/UserAccountUseCaseError.scala b/modules/command/use-case/src/main/scala/io/github/j5ik2o/pcqrses/command/useCase/users/UserAccountUseCaseError.scala
index cd9cd10..1a832f4 100644
--- a/modules/command/use-case/src/main/scala/io/github/j5ik2o/pcqrses/command/useCase/users/UserAccountUseCaseError.scala
+++ b/modules/command/use-case/src/main/scala/io/github/j5ik2o/pcqrses/command/useCase/users/UserAccountUseCaseError.scala
@@ -1,5 +1,11 @@
 package io.github.j5ik2o.pcqrses.command.useCase.users
 
-enum UserAccountUseCaseError {
+enum UserAccountUseCaseError extends UseCaseError {
+  case CreationFailed(msg: String)
+  case UnexpectedError(msg: String, cause: Option[Throwable])
 
+  override def message: String = this match {
+    case CreationFailed(msg) => msg
+    case UnexpectedError(msg, _) => msg
+  }
 }
diff --git a/modules/infrastructure/src/main/scala/io/github/j5ik2o/pcqrses/infrastructure/effect/PekkoInterop.scala b/modules/infrastructure/src/main/scala/io/github/j5ik2o/pcqrses/infrastructure/effect/PekkoInterop.scala
index 705eab4..395ae29 100644
--- a/modules/infrastructure/src/main/scala/io/github/j5ik2o/pcqrses/infrastructure/effect/PekkoInterop.scala
+++ b/modules/infrastructure/src/main/scala/io/github/j5ik2o/pcqrses/infrastructure/effect/PekkoInterop.scala
@@ -1,3 +1,80 @@
-package io.github.j5ik2o.pcqrses.infrastructure.effect class PekkoInterop {
+package io.github.j5ik2o.pcqrses.infrastructure.effect
 
-}
+import zio.{Duration, IO, Runtime, Task, Unsafe, ZIO}
+
+import scala.concurrent.{ExecutionContext, Future}
+
+/**
+ * PekkoとZIOの相互運用ユーティリティ
+ */
+object PekkoInterop {
+
+  /**
+   * FutureをZIOに変換
+   * エラーはThrowableとして扱う
+   */
+  def fromFuture[A](future: => Future[A])(implicit ec: ExecutionContext): Task[A] =
+    ZIO.fromFuture(implicit ec => future)
+
+  /**
+   * Future[Either[E, A]]をZIOに変換
+   * Leftの場合はZIOのエラーチャネルに、RightはZIOの成功値に
+   * FutureのThrowableもEitherのエラーと統合
+   */
+  def fromFutureEither[E, A](future: => Future[Either[E, A]], wrapThrowable: Throwable => E)(implicit ec: ExecutionContext): IO[E, A] =
+    ZIO.fromFuture(implicit ec => future)
+      .mapError(wrapThrowable)
+      .flatMap {
+        case Right(value) => ZIO.succeed(value)
+        case Left(error) => ZIO.fail(error)
+      }
+
+  /**
+   * Future[Option[A]]をZIOに変換
+   * Noneの場合は指定されたエラーを返す
+   * FutureのThrowableもオプションのエラーと統合
+   */
+  def fromFutureOption[E, A](future: => Future[Option[A]], ifNone: => E, wrapThrowable: Throwable => E)(implicit ec: ExecutionContext): IO[E, A] =
+    ZIO.fromFuture(implicit ec => future)
+      .mapError(wrapThrowable)
+      .flatMap {
+        case Some(value) => ZIO.succeed(value)
+        case None => ZIO.fail(ifNone)
+      }
+
+  /**
+   * ZIOをFutureに変換（Runtime必要）
+   * エラーは例外として投げられる
+   */
+  def toFuture[E, A](zio: IO[E, A])(implicit runtime: Runtime[Any]): Future[A] =
+    Unsafe.unsafe { implicit unsafe =>
+      runtime.unsafe.runToFuture(zio.mapError {
+        case t: Throwable => t
+        case e => new RuntimeException(s"ZIO error: $e")
+      })
+    }
+
+  /**
+   * ZIOをFuture[Either[E, A]]に変換
+   * エラーをEitherのLeftとして保持
+   */
+  def toFutureEither[E, A](zio: IO[E, A])(implicit runtime: Runtime[Any]): Future[Either[E, A]] =
+    Unsafe.unsafe { implicit unsafe =>
+      runtime.unsafe.runToFuture(zio.either)
+    }
+
+  /**
+   * 複数のFutureを並行実行してZIOに変換
+   */
+  def collectPar[A](futures: Iterable[Future[A]])(implicit ec: ExecutionContext): Task[List[A]] =
+    ZIO.collectAllPar(futures.map(fromFuture(_)).toList)
+
+  /**
+   * タイムアウト付きのFuture変換
+   */
+  def fromFutureWithTimeout[A](future: => Future[A], timeout: Duration)(implicit ec: ExecutionContext): Task[A] =
+    fromFuture(future).timeout(timeout).flatMap {
+      case Some(value) => ZIO.succeed(value)
+      case None => ZIO.fail(new java.util.concurrent.TimeoutException(s"Future timed out after $timeout"))
+    }
+}
\ No newline at end of file

```

## コミット: 823d50b

### メッセージ

```
feat: ユースケースレイヤーの基本構造を追加
コマンド側にユースケースレイヤーを導入し、ドメイン層とインターフェース層の
架け橋となる基本構造を実装。

追加内容:
- UseCaseError トレイト：ユースケースエラーの基底型
- UserAccountUseCaseError enum：ユーザーアカウント関連のエラー定義
- UserAccountUseCase クラス：ユーザーアカウント操作のユースケース
- PekkoInterop オブジェクト：PekkoとZIOの相互運用ユーティリティ
```

### 変更されたファイル

- A	modules/command/use-case/src/main/scala/io/github/j5ik2o/pcqrses/command/useCase/users/UseCaseError.scala
- A	modules/command/use-case/src/main/scala/io/github/j5ik2o/pcqrses/command/useCase/users/UserAccountUseCase.scala
- A	modules/command/use-case/src/main/scala/io/github/j5ik2o/pcqrses/command/useCase/users/UserAccountUseCaseError.scala
- A	modules/infrastructure/src/main/scala/io/github/j5ik2o/pcqrses/infrastructure/effect/PekkoInterop.scala

### 変更内容

```diff
commit 823d50bc6d4e5a2184ea47897a11c3c67eca04c7
Author: Junichi Kato <j5ik2o@gmail.com>
Date:   Fri Sep 19 01:50:35 2025 +0900

    feat: ユースケースレイヤーの基本構造を追加
    
    コマンド側にユースケースレイヤーを導入し、ドメイン層とインターフェース層の
    架け橋となる基本構造を実装。
    
    追加内容:
    - UseCaseError トレイト：ユースケースエラーの基底型
    - UserAccountUseCaseError enum：ユーザーアカウント関連のエラー定義
    - UserAccountUseCase クラス：ユーザーアカウント操作のユースケース
    - PekkoInterop オブジェクト：PekkoとZIOの相互運用ユーティリティ

diff --git a/modules/command/use-case/src/main/scala/io/github/j5ik2o/pcqrses/command/useCase/users/UseCaseError.scala b/modules/command/use-case/src/main/scala/io/github/j5ik2o/pcqrses/command/useCase/users/UseCaseError.scala
new file mode 100644
index 0000000..86e16bf
--- /dev/null
+++ b/modules/command/use-case/src/main/scala/io/github/j5ik2o/pcqrses/command/useCase/users/UseCaseError.scala
@@ -0,0 +1,5 @@
+package io.github.j5ik2o.pcqrses.command.useCase.users
+
+trait UseCaseError {
+
+}
diff --git a/modules/command/use-case/src/main/scala/io/github/j5ik2o/pcqrses/command/useCase/users/UserAccountUseCase.scala b/modules/command/use-case/src/main/scala/io/github/j5ik2o/pcqrses/command/useCase/users/UserAccountUseCase.scala
new file mode 100644
index 0000000..ae918ab
--- /dev/null
+++ b/modules/command/use-case/src/main/scala/io/github/j5ik2o/pcqrses/command/useCase/users/UserAccountUseCase.scala
@@ -0,0 +1,3 @@
+package io.github.j5ik2o.pcqrses.command.useCase.users class UserAccountUseCase {
+
+}
diff --git a/modules/command/use-case/src/main/scala/io/github/j5ik2o/pcqrses/command/useCase/users/UserAccountUseCaseError.scala b/modules/command/use-case/src/main/scala/io/github/j5ik2o/pcqrses/command/useCase/users/UserAccountUseCaseError.scala
new file mode 100644
index 0000000..cd9cd10
--- /dev/null
+++ b/modules/command/use-case/src/main/scala/io/github/j5ik2o/pcqrses/command/useCase/users/UserAccountUseCaseError.scala
@@ -0,0 +1,5 @@
+package io.github.j5ik2o.pcqrses.command.useCase.users
+
+enum UserAccountUseCaseError {
+
+}
diff --git a/modules/infrastructure/src/main/scala/io/github/j5ik2o/pcqrses/infrastructure/effect/PekkoInterop.scala b/modules/infrastructure/src/main/scala/io/github/j5ik2o/pcqrses/infrastructure/effect/PekkoInterop.scala
new file mode 100644
index 0000000..705eab4
--- /dev/null
+++ b/modules/infrastructure/src/main/scala/io/github/j5ik2o/pcqrses/infrastructure/effect/PekkoInterop.scala
@@ -0,0 +1,3 @@
+package io.github.j5ik2o.pcqrses.infrastructure.effect class PekkoInterop {
+
+}

```

